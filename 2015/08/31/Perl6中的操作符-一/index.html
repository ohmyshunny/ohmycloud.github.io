<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|monospace:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="操作符,优先级," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="操作符优先级S03-operators/arith.t lines 46–342
S03-operators/precedence.t  lines 5–200
Perl 6 拥有和 Perl 5 同等数量的优先级级别，但是它们散布在不同的地方。这儿，我们列出了从最紧凑到最松散的级别，每一级别还有几个例子：
最高优先级到最低优先级：
12345678910111213141516171819202">
<meta property="og:type" content="article">
<meta property="og:title" content="Perl 6 中的操作符(一)">
<meta property="og:url" content="https://ohmycloud.github.io/2015/08/31/Perl6中的操作符-一/index.html">
<meta property="og:site_name" content="Perl 6 青春小站">
<meta property="og:description" content="操作符优先级S03-operators/arith.t lines 46–342
S03-operators/precedence.t  lines 5–200
Perl 6 拥有和 Perl 5 同等数量的优先级级别，但是它们散布在不同的地方。这儿，我们列出了从最紧凑到最松散的级别，每一级别还有几个例子：
最高优先级到最低优先级：
12345678910111213141516171819202">
<meta property="og:updated_time" content="2016-10-23T16:44:09.715Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Perl 6 中的操作符(一)">
<meta name="twitter:description" content="操作符优先级S03-operators/arith.t lines 46–342
S03-operators/precedence.t  lines 5–200
Perl 6 拥有和 Perl 5 同等数量的优先级级别，但是它们散布在不同的地方。这儿，我们列出了从最紧凑到最松散的级别，每一级别还有几个例子：
最高优先级到最低优先级：
12345678910111213141516171819202">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"hide"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="https://ohmycloud.github.io/2015/08/31/Perl6中的操作符-一/"/>

  <title> Perl 6 中的操作符(一) | Perl 6 青春小站 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Perl 6 青春小站</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>
 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Perl 6 中的操作符(一)
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-08-31T00:00:00+08:00" content="2015-08-31">
              2015-08-31
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Perl-6/" itemprop="url" rel="index">
                    <span itemprop="name">Perl 6</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/08/31/Perl6中的操作符-一/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/08/31/Perl6中的操作符-一/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="操作符优先级"><a href="#操作符优先级" class="headerlink" title="操作符优先级"></a>操作符优先级</h1><p><a href="https://github.com/perl6/roast/blob/master/S03-operators/arith.t#L46-L342" target="_blank" rel="external">S03-operators/arith.t lines 46–342</a></p>
<p><a href="https://github.com/perl6/roast/blob/master/S03-operators/precedence.t#L5-L200" target="_blank" rel="external">S03-operators/precedence.t  lines 5–200</a></p>
<p>Perl 6 拥有和 Perl 5 同等数量的优先级级别，但是它们散布在不同的地方。这儿，我们列出了从最紧凑到最松散的级别，每一级别还有几个例子：</p>
<p>最高优先级到最低优先级：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">A  Level             Examples</div><div class="line">=  =====             ========</div><div class="line">N  Terms             42 3.14 &quot;eek&quot; qq[&quot;foo&quot;] $x :!verbose @$array</div><div class="line">L  Method postfix    .meth .+ .? .* .() .[] .&#123;&#125; .&lt;&gt; .«» .:: .= .^ .:</div><div class="line">N  Autoincrement     ++ --</div><div class="line">R  Exponentiation    **</div><div class="line">L  Symbolic unary    ! + - ~ ? | || +^ ~^ ?^ ^</div><div class="line">L  Multiplicative    * / % %% +&amp; +&lt; +&gt; ~&amp; ~&lt; ~&gt; ?&amp; div mod gcd lcm</div><div class="line">L  Additive          + - +| +^ ~| ~^ ?| ?^</div><div class="line">L  Replication       x xx</div><div class="line">X  Concatenation     ~</div><div class="line">X  Junctive and      &amp; (&amp;) ∩</div><div class="line">X  Junctive or       | ^ (|) (^) ∪ (-)</div><div class="line">L  Named unary       temp let</div><div class="line">N  Structural infix  but does &lt;=&gt; leg cmp .. ..^ ^.. ^..^</div><div class="line">C  Chaining infix    != == &lt; &lt;= &gt; &gt;= eq ne lt le gt ge ~~ === eqv !eqv (&lt;) (elem)</div><div class="line">X  Tight and         &amp;&amp;</div><div class="line">X  Tight or          || ^^ // min max</div><div class="line">R  Conditional       ?? !! ff fff</div><div class="line">R  Item assignment   = =&gt; += -= **= xx= .=</div><div class="line">L  Loose unary       so not</div><div class="line">X  Comma operator    , :</div><div class="line">X  List infix        Z minmax X X~ X* Xeqv ...</div><div class="line">R  List prefix       print push say die map substr ... [+] [*] any Z=</div><div class="line">X  Loose and         and andthen</div><div class="line">X  Loose or          or xor orelse</div><div class="line">X  Sequencer         &lt;== ==&gt; &lt;&lt;== ==&gt;&gt;</div><div class="line">N  Terminator        ; &#123;...&#125; unless extra ) ] &#125;</div></pre></td></tr></table></figure>
<a id="more"></a>
<p>下面使用的两个 <code>!</code> 符号通常表示任意一对儿拥有相同优先级的操作符， 上表指定的二元操作符的结合性解释如下(其中 A 代表<strong>结合性</strong>， associativities )：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">    结合性     Meaning of $a ! $b ! $c</div><div class="line">    =====     =========================</div><div class="line">L   left      ($a ! $b) ! $c</div><div class="line">R   right     $a ! ($b ! $c)</div><div class="line">N   non       ILLEGAL</div><div class="line">C   chain     ($a ! $b) and ($b ! $c)</div><div class="line">X   list      infix:&lt;!&gt;($a; $b; $c)</div></pre></td></tr></table></figure>
<p>对于一元操作符， 这解释为:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">    结合性     Meaning of !$a!</div><div class="line">    =====     =========================</div><div class="line">L   left      (!$a)!</div><div class="line">R   right     !($a!)</div><div class="line">N   non       ILLEGAL</div></pre></td></tr></table></figure>
<p>(在标准 Perl 中没有能利用结合性的一元操作符，因为在每一优先级级别中， 标准操作符要么一贯地是前缀，要么是后缀。)</p>
<p>注意列表结合性（X）只在同一操作符之间有效。如果两个拥有不同列表结合性的操作符拥有相同的优先级，它们彼此间就会被认为是非结合性的，必须使用圆括号来消除歧义。</p>
<p><a href="https://github.com/perl6/roast/blob/master/S03-operators/precedence.t#L211-L245" target="_blank" rel="external">S03-operators/precedence.t lines 211–245</a></p>
<p>例如， <code>X</code> 交叉操作符和 <code>Z</code> <strong>拉链操作符</strong> 都有 “list infix” 优先级，但是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">@a X @b Z @c</div></pre></td></tr></table></figure>
<p>是非法的，它必须写成下面的任意一种：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">(@a X @b) Z @c</div><div class="line">@a X (@b Z @c)</div></pre></td></tr></table></figure>
<p>如果仅有的列表结合性操作符的实现是二进制的, 那么它会被当作是右结合性的。<br>标准的优先级层级尝试和它们的结合性相一致, 但是用户定义的操作符和优先级级别可以在同一优先级级别上混合右结合性和左结合性操作符。如果在同一个表达式中不小心使用了有冲突的操作符, 那么操作符彼此之间会被认为是非结合性的, 并且必须使用圆括号来消除歧义。</p>
<p>如果你没有在上面看见你喜欢的操作符, 下面的章节会包含所有按优先级排列的操作符。这儿描述了基本的操作符。</p>
<h4 id="Term-precedence"><a href="#Term-precedence" class="headerlink" title="Term precedence"></a>Term precedence</h4><p>这实际上不真的是优先级, 但是它在这里是因为没有操作符的优先级比 term 高. 查看 S02 获取各种 terms 的更详尽的描述. 这里有一些例子:</p>
<ul>
<li>Int 字面量</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">42</div></pre></td></tr></table></figure>
<ul>
<li>Num 字面量</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">3.14</div></pre></td></tr></table></figure>
<ul>
<li>不能插值的 Str 字面量</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&apos;$100&apos;</div></pre></td></tr></table></figure>
<ul>
<li>能插值的 Str 字面量</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&quot;Answer = $answer\n&quot;</div></pre></td></tr></table></figure>
<ul>
<li>通用的 Str 字面量</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">q[&quot;$100&quot;]</div><div class="line">qq[&quot;$answer&quot;]</div></pre></td></tr></table></figure>
<ul>
<li>Heredoc</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">qq:to/END/</div><div class="line">    Dear $recipient:</div><div class="line">    Thanks!</div><div class="line">    Sincerely,</div><div class="line">    $me</div><div class="line">    END</div></pre></td></tr></table></figure>
<ul>
<li>数组构造器</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[1,2,3]</div></pre></td></tr></table></figure>
<p> <code>[ ]</code> 里面提供了列表上下文. 技术上讲, 它实际上提供了一个  <code>semilist</code> 上下文, 即一系列分号分割的语句, 每条语句都在列表上下文中解释, 然后被连接成最终的列表.</p>
<ul>
<li>散列构造器</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&#123; &#125;</div><div class="line">&#123; a =&gt; 42 &#125;</div></pre></td></tr></table></figure>
<p><code>{ }</code> 里面要么是空的, 要么是以 pair 或 散列 开头的单个列表, 否则你必须使用 <code>hash( )</code> 或 <code>%( )</code> 代替.</p>
<ul>
<li>Closure</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123; ... &#125;</div></pre></td></tr></table></figure>
<p>如果出现在语句那儿, 会立即执行。 否则会延迟内部作用域的求值。</p>
<ul>
<li>捕获构造器</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">\(@a,$b,%c)</div></pre></td></tr></table></figure>
<p>代表还不知道它的上下文的参数列表的抽取,</p>
<ul>
<li>符号化变量</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$x</div><div class="line">@y</div><div class="line">%z</div><div class="line">$^a</div><div class="line">$?FILE</div><div class="line">&amp;func</div><div class="line">&amp;div:(Int, Int --&gt; Int)</div></pre></td></tr></table></figure>
<ul>
<li>符号作为上下文化函数</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$()</div><div class="line">@()</div><div class="line">%()</div><div class="line">&amp;()</div></pre></td></tr></table></figure>
<ul>
<li>quote-like 记号中的 Regexes</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">/abc/</div><div class="line">rx:i[abc]</div><div class="line">s/foo/bar/</div></pre></td></tr></table></figure>
<ul>
<li>转换</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tr/a..z/A..Z/</div></pre></td></tr></table></figure>
<p>注意范围使用 <code>..</code> 而非 <code>-</code>.</p>
<ul>
<li>类型名</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Num</div><div class="line">::Some::Package</div></pre></td></tr></table></figure>
<ul>
<li>由圆括号环绕的子表达式</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(1+2)</div></pre></td></tr></table></figure>
<ul>
<li>带括号的函数调用</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">a(1)</div></pre></td></tr></table></figure>
<p>一个项后面立即跟着一个圆括号化的表达式总是被当作函数调用，　即使那个标识符也含有前缀意义，　所以那种情况下你从来不用担心优先级。因此：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">not($x) + 1         # means (not $x) + 1</div></pre></td></tr></table></figure>
<ul>
<li>Pair 构造器</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">:limit(5)</div><div class="line">:!verbose</div></pre></td></tr></table></figure>
<ul>
<li>签名字面量</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">:(Dog $self:)</div></pre></td></tr></table></figure>
<ul>
<li>使用隐式调用者的方法调用</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">.meth       # call on $_</div><div class="line">.=meth      # modify $_</div></pre></td></tr></table></figure>
<p>注意这只能出现在需要项(term)的地方。需要后缀的地方它就是后缀。如果需要中缀操作符（即, 在项后面, 之间是空格）, .meth 就是语法错误。(.meth 形式在那儿是被允许的因为有一个和方法调用形式在语义上等价但是允许在 = 号和方法名之间于空格存在的特殊 .= 中缀赋值操作符)。</p>
<ul>
<li>Listop (leftward)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">4,3, sort 2,1       # 4,3,1,2</div></pre></td></tr></table></figure>
<p>就像 Perl 5 中一样, 列表操作符对于它左侧的表达式看起来像一个项(term), 所以它比左侧的逗号绑定的紧凑点, 比右侧的逗号绑定的松散点。– 查看下面的列表前缀优先级。</p>
<h4 id="方法后缀优先级"><a href="#方法后缀优先级" class="headerlink" title="方法后缀优先级"></a>方法后缀优先级</h4><p>所有的方法后缀都以一个点开头, 尽管对于下标来说, 点号是可选的. 因为这些是最紧密的操作符,  你可以看到一系列方法调用作为单独的项, 这个项仅仅要表达一个复杂的名字.</p>
<ul>
<li>标准的单个分发方法调用</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$obj.meth</div></pre></td></tr></table></figure>
<ul>
<li>标准单个分发方法调用的变体</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$obj.+meth</div><div class="line">$obj.?meth</div><div class="line">$obj.*meth</div></pre></td></tr></table></figure>
<p>除了普通的 <code>.</code> 方法调用之外, 还有 <code>.*</code>, <code>.?</code>, 和 <code>.+</code> 变体来控制如何处理多个同名的相关方法.</p>
<ul>
<li>类限定的方法调用</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$obj.::Class::meth</div><div class="line">$obj.Class::meth    # same thing, 假设预先定义了 Class</div></pre></td></tr></table></figure>
<p>就跟 Perl 5 一样, 告诉分发器(dispatcher)从哪个类开始搜索, 而不正好是那个被调用的方法。</p>
<ul>
<li>可变方法调用</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$obj.=meth</div></pre></td></tr></table></figure>
<p>.= 操作符执行了对左侧对象的就地修改。</p>
<ul>
<li>元方法调用</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$obj.^meth</div></pre></td></tr></table></figure>
<p><code>.^</code> 操作符调用了类的元方法(class metamethod); <strong>foo.^bar</strong> 是 <code>foo.HOW.bar</code> 的简写。</p>
<ul>
<li>像方法一样的后环缀</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$routine.()</div><div class="line">$array.[]</div><div class="line">$hash.&#123;&#125;</div><div class="line">$hash.&lt;&gt;</div><div class="line">$hash.«»</div></pre></td></tr></table></figure>
<p>不带点的这些形式有同样的优先级.</p>
<ul>
<li>带点形式的其它后缀操作符</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$x.++         # postfix:&lt;++&gt;($x)</div></pre></td></tr></table></figure>
<ul>
<li>带点形式的其它前缀操作符</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$x.:&lt;++&gt;       # prefix:&lt;++&gt;($x)</div></pre></td></tr></table></figure>
<ul>
<li>有一个特殊的非中缀操作符 infix:&lt;.&gt; 所以</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$foo . $bar</div></pre></td></tr></table></figure>
<p>总是会返回编译时错误来标示用户应该使用中缀操作符 infix&lt;~&gt; 代替。这用于捕获正在学习 Perl 6 的 Perl 5 程序员可能会犯的错误。</p>
<h4 id="自增优先级"><a href="#自增优先级" class="headerlink" title="自增优先级"></a>自增优先级</h4><p>就像在 C 中一样，这些操作符增加或减少正在谈论的那个对象的值，根据操作符在前面还是在后面。还是像 C 中一样，在同一个表达式中多个对单个可变对象的引用可能导致未定义行为除非显式地插入了某些序列操作符。请查看 “Sequence points”。</p>
<p>至于 Perl 6 中得所有后缀操作符，项(term) 和它的后缀之间不允许有空格。请查看 S02 来了解为什么，还有怎么使用 “unspace” 来应急这个约束。</p>
<p>和可变方法一样，所有这些操作符被分派为操作符数的类型并返回一个同类型的结果，但是只有（不可变的）值存储在可变容器中时，它们在值类型上才是合法的。然而，为了支持通用的习语，一个裸的未定义值（在一个合适的标量容器中）是被允许把自身修改成 Int 类型的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">say $x unless %seen&#123;$x&#125;++;</div></pre></td></tr></table></figure>
<p>Str (在一个合适的容器中)的增加和 Perl 5 类似，但是被稍微推广了一点。Perl 6 会扫描前面不是 ‘.’ 字符的字符串中得最后的字母数字序列。不像 Perl 5 那样，这个字母数字序列不需要锚定到字符串的开头，也不需要以字母数字符开头；字符串中匹配 <code>&lt;!after &#39;.&#39;&gt; &lt;rangechar&gt;+</code> 字母数字的最后的序列被增加而不管它前面是什么。</p>
<p><code>&lt;rangechar&gt;</code> 字符类被定义为那种字符的子集(subset)，Perl 知道怎么在范围(range)中增加它，就像下面定义的那样：<br>额外的匹配增加了两个好处：对于典型的增长文件名的用法，你不必担心路径名或扩展名：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$file = &quot;/tmp/pix000.jpg&quot;;</div><div class="line">$file++;                 # /tmp/pix001.jpg, 不是 /tmp/pix000.jph</div></pre></td></tr></table></figure>
<p>也许更重要的是, 如果你恰好增长了一个以小数结尾的字符串，Perl 6 也能应对自如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$num = &quot;123.456&quot;;</div><div class="line">$num++;             # 124.456, not 123.457</div></pre></td></tr></table></figure>
<p>字符位置增加自然范围内任何Unicode范围被认为代表了数字0 . .9或被认为是一个完整的周期性字母的(一例)(Unicode)脚本。只在codepoints脚本,代表他们的字母表,形成一个周期独立于其他字母可能使用。(此规范延缓这种脚本的用户,以确定适当的周期的信件)。我们任意定义ASCII字母不相交与其他脚本,使用范围的字符,但是字母点缀ASCII字母是不允许的。</p>
<p>如果在这样一个范围中当前字符是字符串位置中最后的字符,它包装的第一个字符范围和发送一个“携带”的位置了,然后那个位置是增加的范围。当且仅当最左边的位置是筋疲力尽的范围,一个额外的字符相同的范围是插入到持有套利以相同的方式作为Perl 5,所以递增(zz99)“变成”(aaa00)zz和递增(99)“变成”(100 aa)”。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&gt; my $a = &quot;99zz&quot;</div><div class="line">&gt; $a++           # 99zz</div><div class="line">&gt; $a++           # 100aa</div><div class="line"></div><div class="line">&gt; my $b = &apos;zz99&apos;</div><div class="line">&gt; $b++           # zz99</div><div class="line">&gt; $b++           # aaa00</div></pre></td></tr></table></figure>
<p>下面的 Unicode  范围是某些可能的 rangechar 范围。对于字母我们有这样的范围：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">A..Z        # ASCII uc</div><div class="line">a..z        # ASCII lc</div><div class="line">&apos;Α&apos;..&apos;Ω&apos;    # Greek uc</div><div class="line">α..ω        # Greek lc (presumably skipping C&lt;U+03C2&gt;, final sigma)</div><div class="line">א..ת        # 希伯来</div><div class="line">  etc.      # (XXX out of my depth here)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&gt; my @a =  &apos;Α&apos;..&apos;Ω&apos;  # Α Β Γ Δ Ε Ζ Η Θ Ι Κ Λ Μ Ν Ξ Ο Π Ρ ΢ Σ Τ Υ Φ Χ Ψ Ω</div></pre></td></tr></table></figure>
<p>对于数字我们有这样的范围：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">0..9         # ASCII</div><div class="line">٠..٩         # 阿拉伯语-印度语</div><div class="line">०..९         # 天城文</div><div class="line">০..৯         # 孟加拉语</div><div class="line">&apos;੦&apos;..&apos;੯&apos;    # 古木基文</div><div class="line">૦..૯        # 古吉拉特文</div><div class="line">୦..୯        # 奥里亚语</div></pre></td></tr></table></figure>
<p>等等.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&gt; my @b =    &apos;੦&apos;..&apos;੯&apos;   #  ੦ ੧ ੨ ੩ ੪ ੫ ੬ ੭ ੮ ੯</div></pre></td></tr></table></figure>
<p>某些其它非书写用的 0..9 范围也可以被增长，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">⁰..⁹        # 上标 (note, cycle includes latin-1 chars)</div><div class="line">&apos;₀&apos;..&apos;₉&apos;    # 下标</div><div class="line">０..９      # 全角数字</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&gt; my @f = &apos;₀&apos;..&apos;₉&apos; # ₀ ₁ ₂ ₃ ₄ ₅ ₆ ₇ ₈ ₉</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Ⅰ..Ⅻ        # clock roman numerals uc</div><div class="line">ⅰ..ⅻ        # clock roman numerals lc</div><div class="line">⓪..㊿       # circled digits/numbers 0..50</div><div class="line">⒜..⒵        # parenthesized lc</div><div class="line">⚀..⚅        # die faces 1..6</div><div class="line">&apos;❶&apos;..&apos;❿&apos;        # dingbat negative circled 1..10</div></pre></td></tr></table></figure>
<p>etc.</p>
<p>注意: 对于 Perl 中实际的范围， 你需要把上面的字符用引号括起来：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&apos;⓪&apos;..&apos;㊿&apos;   # circled digits/numbers 0..50</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">my @d = &apos;⓪&apos;..&apos;⓾&apos;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">⓪ ⓫ ⓬ ⓭ ⓮ ⓯ ⓰ ⓱ ⓲ ⓳ ⓴ ⓵ ⓶ ⓷ ⓸ ⓹ ⓺ ⓻ ⓼ ⓽ ⓾</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">my @e = &apos;❶&apos;..&apos;❿&apos; # ❶ ❷ ❸ ❹ ❺ ❻ ❼ ❽ ❾ ❿</div></pre></td></tr></table></figure>
<p>If you want to future-proof the top end of your range against further Unicode additions, you may specify it as “whatever”:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&apos;⓪&apos;..*      # circled digits/numbers up to current known Unicode max</div></pre></td></tr></table></figure>
<p>prefix:&lt;|&gt;,  将对象展开为参数列表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">| $capture</div></pre></td></tr></table></figure>
<p>把Capture 值的内容(或 Capture-like)插值进当前的参数列表中, 就像它们被字面地指定那样。</p>
<p>prefix:&lt;||&gt;,  将对象展开为分号列表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">|| $parcel</div></pre></td></tr></table></figure>
<p>把 Parcel(或其它有顺序的值)的元素插值到当前参数列表中就像它们被字面地指定一样, 由分号分割, 即, 以多维级别。在列表中的列表上下文之外使用该操作符是错误的; 换句话说, 它必须被绑定到 <code>**</code>(slice)参数上而非吞噬参数<code>*</code>上。</p>
<p>infix:<div>, 整除</div></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$numerator div $denominator</div></pre></td></tr></table></figure>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; <span class="number">3</span> div <span class="number">2</span>     <span class="comment"># 1</span></div><div class="line">&gt; <span class="number">13</span> div <span class="number">2</span>    <span class="comment"># 6</span></div></pre></td></tr></table></figure>
<p>而</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&gt; <span class="number">13</span> div <span class="number">2.4</span></div></pre></td></tr></table></figure>
<p>报错：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Cannot call infix:&lt;div&gt;(Int, Rat); none of these signatures match:</div><div class="line">    (Int:D \a, Int:D \b)</div><div class="line">    (<span class="keyword">int</span> $a, <span class="keyword">int</span> $b --&gt; <span class="keyword">int</span>)</div><div class="line">  in block &lt;unit&gt; at &lt;unknown file&gt;:<span class="number">1</span></div></pre></td></tr></table></figure>
<p>infix:&lt;%&gt;, modulo</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$x % $y</div></pre></td></tr></table></figure>
<h2 id="重复操作符"><a href="#重复操作符" class="headerlink" title="重复操作符"></a>重复操作符</h2><p>infix:<x>, 字符串/缓冲区 复制(或者重复/拷贝)</x></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$string x $count</div></pre></td></tr></table></figure>
<p>在字符串上下文中计算左边的参数，重复结果字符串值由右侧参数指定的倍数次，然后不管上下文，把结果作为单个连接好的字符串返回。</p>
<p>如果重复次数小于 1，则返回空字符串。重复次数不可以是 <code>*</code>，因为 Perl 6 不支持无穷字符串。（至少，还没有…）然而注意，有一天无穷字符串可能使用 cat(<code>$string xx *</code>) 来模仿，在这种情况下，<code>$string x *</code>  可能是它的简写。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&apos;a&apos; x *;              # WhateverCode.new()</div><div class="line">my $a = &apos;a&apos; x *;      # WhateverCode.new()</div><div class="line">say $a;               # WhateverCode.new()</div><div class="line">say $a(12);           # 可以传递参数！, 结果为 aaaaaaaaaaaa</div></pre></td></tr></table></figure>
<p>infix:<xx>, 表达式重复操作符</xx></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">@list xx $count  # 如果 $count  是 * ，则返回一个无限列表 （懒惰的，因为列表默认是懒惰的 ）</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">rand xx *;                # infinite supply of random numbers</div><div class="line">[ 0 xx $cols ] xx $rows   # distinct arrays, not the same row replicated</div></pre></td></tr></table></figure>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt; <span class="keyword">my</span> @random= <span class="keyword">rand</span> xx *;</div><div class="line">&gt; @random[<span class="number">0</span>]                <span class="comment"># 0.510689533871727</span></div><div class="line">&gt; @random[<span class="number">0</span>]                <span class="comment"># 0.510689533871727</span></div><div class="line">&gt; @random[<span class="number">1</span>]                <span class="comment"># 0.993102039714483</span></div><div class="line">&gt; @random[<span class="number">2</span>]                <span class="comment"># 0.177400471499773</span></div><div class="line">&gt; @random[<span class="number">12</span>]</div></pre></td></tr></table></figure>
<h2 id="字符串连接"><a href="#字符串连接" class="headerlink" title="字符串连接"></a>字符串连接</h2><p>infix:&lt;~&gt;, 字符串 /缓冲 连接</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$x ~ $y</div></pre></td></tr></table></figure>
<h2 id="范围对象创建"><a href="#范围对象创建" class="headerlink" title="范围对象创建"></a>范围对象创建</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$min .. $max</div><div class="line">$min ^.. $max</div><div class="line">$min ..^ $max</div><div class="line">$min ^..^ $max</div></pre></td></tr></table></figure>
<h2 id="逗号操作符优先级"><a href="#逗号操作符优先级" class="headerlink" title="逗号操作符优先级"></a><a href="https://desgin.perl6.org/S03.html#Comma_operator_precedence" target="_blank" rel="external">逗号操作符优先级</a></h2><ul>
<li>infix:&lt;,&gt;  参数分隔符</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">1, 2, 3, @many</div></pre></td></tr></table></figure>
<p>不像 Perl5 ，逗号操作符从来不返回最后一个值（在标量上下文中它返回一个列表）</p>
<ul>
<li>infix:&lt;:&gt;, 调用者标记</li>
</ul>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">say</span> $*OUT: <span class="string">"howdy, world"</span>  <span class="comment"># howdy, world</span></div><div class="line"><span class="keyword">say</span>($*OUT: <span class="string">"howdy, world"</span>) <span class="comment"># howdy, world</span></div><div class="line"><span class="keyword">push</span> @array: <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span></div><div class="line"><span class="keyword">push</span>(@array: <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</div><div class="line">\($object: <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>, :foo, :!bar)</div></pre></td></tr></table></figure>
<p>冒号操作符就像逗号那样解析，但是它把左边的参数标记为调用者，这会把函数调用转换为方法调用。它只能在参数列表或捕获的第一个参数身上使用，用在其它地方会解析失败。当用在捕获中时，尚不知道捕获会被绑定到哪个签名上；如果绑定到一个非方法的签名身上，调用者仅仅转换成第一个位置参数，就像冒号是一个逗号一样。</p>
<p>为了避免和其它的冒号形式混淆，冒号中缀操作符后面必须跟上空格或终止符。它前面可以有空格也可以没有空格。</p>
<p>注意：在下面把中缀操作符和冒号区别开:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">@array.push: 1,2,3</div><div class="line">@array.push(1,2,3): 4,5,6</div><div class="line">push(@array, 1,2,3): 4,5,6</div></pre></td></tr></table></figure>
<p>这是把普通函数或方法转换为列表操作符的特殊形式。 这种特殊形式只在点语法形式的方法调用后被识别， 或者在方法或函数调用的右圆括号之后被识别。这种特殊形式不允许其间有空格，但是下一个参数的前面要有空格。如果可能的话在所有其它情况下，冒号会被解析为副词的开始，否则会被解析为调用者标记（上面描述的中缀操作符。）</p>
<p>这种特殊形式不允许介于中间的空格， 但是允许在下一个参数之前有空格。 在所有情况下， 冒号会被尽可能地解析为副词的开头，或者调用者标记者（上面描述的中缀）</p>
<p>冒号的另一种特殊方式是, 允许正好在参数列表的右侧圆括号之后为圆括号括住的参数列表添加 listop 参数，附带条件是你被允许把 <code>.foo(): 1,2,3</code> 缩短为 <code>.foo: 1,2,3</code>.(但是仅限于方法调用， 因为普通的函数不需要把处于第一个位置的冒号转换为 listop， 空格就够了。 如果你尝试使用冒号扩展函数名最好把它看作标签。)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">foo $obj.bar: 1,2,3     # special, means foo($obj.bar(1,2,3))</div><div class="line">foo $obj.bar(): 1,2,3   # special, means foo($obj.bar(1,2,3))</div><div class="line">foo $obj.bar(1): 2,3    # special, means foo($obj.bar(1,2,3))</div><div class="line">foo $obj.bar(1,2): 3    # special, means foo($obj.bar(1,2,3))</div><div class="line">foo($obj.bar): 1,2,3    # special, means foo($obj.bar, 1,2,3)</div><div class="line">foo($obj.bar, 1): 2,3   # special, means foo($obj.bar, 1,2,3)</div><div class="line">foo($obj.bar, 1,2): 3   # special, means foo($obj.bar, 1,2,3)</div><div class="line">foo $obj.bar : 1,2,3    # infix:&lt;:&gt;, means $obj.bar.foo(1,2,3)</div><div class="line">foo ($obj.bar): 1,2,3   # infix:&lt;:&gt;, means $obj.bar.foo(1,2,3)</div><div class="line">foo $obj.bar:1,2,3      # 语法错误</div><div class="line">foo $obj.bar :1,2,3     # 语法错误</div><div class="line">foo $obj.bar :baz       # 副词, means foo($obj.bar(:baz))</div><div class="line">foo ($obj.bar) :baz     # 副词, means foo($obj.bar, :baz)</div><div class="line">foo $obj.bar:baz        # extended identifier, foo( $obj.&apos;bar:baz&apos; )</div><div class="line">foo $obj.infix:&lt;+&gt;      # extended identifier, foo( $obj.&apos;infix:&lt;+&gt;&apos; )</div><div class="line">foo: 1,2,3              # label at statement start, else infix</div></pre></td></tr></table></figure>
<p>这个故事的寓意是：如果你不知道冒号是怎样结合的，就使用空格或圆括号让它清晰。</p>
<ul>
<li>List infix precedence 列表中缀优先级</li>
</ul>
<p>列表中缀操作符都有列表结合性，这意味着，同一个中缀操作符是同步起作用的，而不是一个接着一个。不同的操作符被认为是非结合性的，为了明确，必须用括号括起来。</p>
<ul>
<li>infix:<z>,  the zip operator</z></li>
</ul>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span>,<span class="number">2</span> Z <span class="number">3</span>,<span class="number">4</span>   <span class="comment"># (1,3),(2,4)</span></div></pre></td></tr></table></figure>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&gt; <span class="number">2</span>,<span class="number">5</span>,<span class="number">7</span> [Zmin] <span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>     <span class="comment"># 两两比较, 2 4 5</span></div><div class="line">&gt; <span class="keyword">my</span> @a=<span class="number">3</span>,<span class="number">6</span>,<span class="number">9</span>            <span class="comment"># 3 6 9</span></div><div class="line">&gt; <span class="keyword">my</span> @b=<span class="number">4</span>,<span class="number">5</span>,<span class="number">10</span>           <span class="comment"># 4 5 10</span></div><div class="line">&gt; @a [Zmin] @b           <span class="comment"># 3 5 9</span></div><div class="line">&gt; <span class="keyword">my</span> @a = (<span class="number">1</span>,<span class="number">2</span>,<span class="number">9</span>,<span class="number">3</span>,<span class="number">5</span>)    <span class="comment"># 1 2 9 3 5</span></div><div class="line">&gt; <span class="keyword">my</span> @b = (<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">9</span>)    <span class="comment"># 2 3 5 1 9</span></div><div class="line">&gt; <span class="keyword">my</span> @c = (<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">1</span>)    <span class="comment"># 2 3 4 5 1</span></div><div class="line">&gt; @a [Zmin] @b [Zmin] @c <span class="comment"># 1 2 4 1 1</span></div><div class="line">&gt; @a [Zmax] @b [Zmax] @c <span class="comment"># 2 3 9 5 9</span></div></pre></td></tr></table></figure>
<ul>
<li>infix:<minmax>,  minmax 操作符</minmax></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">@a minmax @b</div></pre></td></tr></table></figure>
<p>返回@a和@b中最小值和最大值的一个范围。</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt; <span class="keyword">my</span> @a = <span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>;</div><div class="line">&gt; <span class="keyword">my</span> @b = <span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>;</div><div class="line">&gt; @a minmax @b         <span class="comment"># 1..9</span></div></pre></td></tr></table></figure>
<ul>
<li>infix:<x>,  交叉操作符</x></li>
</ul>
<p>S03-metaops/cross.t lines 6–19  </p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span>,<span class="number">2</span> X <span class="number">3</span>,<span class="number">4</span>          <span class="comment"># (1,3), (1,4), (2,3), (2,4)</span></div></pre></td></tr></table></figure>
<p>和 zip 操作符相比， X 操作符返回元素交叉后的列表。例如，如果只有 2 个列表，第一个列表中取一个元素和第二个列表中取一个元素组成 pair 对儿，第二个元素变化的最迅速。</p>
<p>最右边的列表先遍历完。因此， 你写：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;a b&gt; X &lt;<span class="number">1</span> <span class="number">2</span>&gt;</div></pre></td></tr></table></figure>
<p>你会得到：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(<span class="string">'a'</span>, <span class="string">'1'</span>), (<span class="string">'a'</span>, <span class="string">'2'</span>), (<span class="string">'b'</span>, <span class="string">'1'</span>), (<span class="string">'b'</span>, <span class="string">'2'</span>)</div></pre></td></tr></table></figure>
<p>这在平的上下文会变成一个展平的列表，在 list of list 上下文中会变成列表中的列表</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">say</span> flat(&lt;a b&gt; X &lt;<span class="number">1</span> <span class="number">2</span>&gt;).perl    <span class="comment">#  ("a", "1", "a", "2", "b", "1", "b", "2").list</span></div><div class="line"><span class="keyword">say</span> lol(&lt;a b&gt; X &lt;<span class="number">1</span> <span class="number">2</span>&gt;).perl     <span class="comment"># (("a", "1"), ("a", "2"), ("b", "1"), ("b", "2"))</span></div></pre></td></tr></table></figure>
<p>这个操作符是列表结合性的，所以：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span>,<span class="number">2</span> X <span class="number">3</span>,<span class="number">4</span> X <span class="number">5</span>,<span class="number">6</span></div></pre></td></tr></table></figure>
<p>生成</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>),(<span class="number">1</span>,<span class="number">3</span>,<span class="number">6</span>),(<span class="number">1</span>,<span class="number">4</span>,<span class="number">5</span>),(<span class="number">1</span>,<span class="number">4</span>,<span class="number">6</span>),(<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>),(<span class="number">2</span>,<span class="number">3</span>,<span class="number">6</span>),(<span class="number">2</span>,<span class="number">4</span>,<span class="number">5</span>),(<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>)</div></pre></td></tr></table></figure>
<p>另一方面，如果任一列表为空，你会得到一个空列表。</p>
<p>尽管X两边的列表可能是无限的，在操作符 X的右边使用无限列表可能会产生意想不到的结果，例如：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;a b&gt; X <span class="number">0</span>..*</div></pre></td></tr></table></figure>
<p>会产生</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(<span class="string">'a'</span>,<span class="number">0</span>), (<span class="string">'a'</span>,<span class="number">1</span>), (<span class="string">'a'</span>,<span class="number">2</span>), (<span class="string">'a'</span>,<span class="number">3</span>), (<span class="string">'a'</span>,<span class="number">4</span>), (<span class="string">'a'</span>,<span class="number">5</span>), ...</div></pre></td></tr></table></figure>
<p>并且你绝对不会到达 ‘b’。如果你左侧的列表只包含单个元素，然而，这可能有用，尤其是如果 X 用作元操作符时。看下面。</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">say</span> lol(&lt;a b&gt; X &lt;<span class="number">1</span> <span class="number">2</span>&gt;).perl    <span class="comment"># ("a", "1", "a", "2", "b", "1", "b", "2")</span></div></pre></td></tr></table></figure>
<p>Cross metaoperators 交叉操作符</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">@files X~ <span class="string">'.'</span> X~ @extensions</div><div class="line"><span class="number">1</span>..<span class="number">10</span> X* <span class="number">1</span>..<span class="number">10</span></div><div class="line">@x Xeqv @y</div></pre></td></tr></table></figure>
<p>等等</p>
<p>一个常见的用法是让一个列表只含有单个元素在操作符 X 的一边或另一边：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">@vector X* 2;                 # 每个元素都乘以 2</div><div class="line">$prefix X~ @infinitelist;     # 在无限列表的每个元素前面前置一个元素</div></pre></td></tr></table></figure>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt; <span class="keyword">my</span> $prefix = <span class="string">' - '</span></div><div class="line">&gt; <span class="keyword">my</span> @a =&lt;<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span>&gt;</div><div class="line">&gt; $prefix X~ @a       <span class="comment">#  - 1  - 2  - 3  - 4  - 5</span></div></pre></td></tr></table></figure>
<p>这时右边有一个无限列表是可以的。</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>
    
    <div>
      
        
<div style="text-align:center;color: #ccc;font-size:15px;">
------ Young For Perl 6! ------</div>

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/操作符/" rel="tag">#操作符</a>
          
            <a href="/tags/优先级/" rel="tag">#优先级</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2015/08/29/探索Perl6的Signatures-第二部分/" rel="next" title="探索Perl6的Signatures,第二部分">
                <i class="fa fa-chevron-left"></i> 探索Perl6的Signatures,第二部分
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2015/09/11/Perl-6-Weekly-一/" rel="prev" title="Perl 6 Weekly(一)">
                Perl 6 Weekly(一) <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <div class="ds-share flat" data-thread-key="2015/08/31/Perl6中的操作符-一/"
     data-title="Perl 6 中的操作符(一)"
     data-content=""
     data-url="https://ohmycloud.github.io/2015/08/31/Perl6中的操作符-一/">
  <div class="ds-share-inline">
    <ul  class="ds-share-icons-16">

      <li data-toggle="ds-share-icons-more"><a class="ds-more" href="javascript:void(0);">分享到：</a></li>
      <li><a class="ds-weibo" href="javascript:void(0);" data-service="weibo">微博</a></li>
      <li><a class="ds-qzone" href="javascript:void(0);" data-service="qzone">QQ空间</a></li>
      <li><a class="ds-qqt" href="javascript:void(0);" data-service="qqt">腾讯微博</a></li>
      <li><a class="ds-wechat" href="javascript:void(0);" data-service="wechat">微信</a></li>

    </ul>
    <div class="ds-share-icons-more">
    </div>
  </div>
</div>
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2015/08/31/Perl6中的操作符-一/"
           data-title="Perl 6 中的操作符(一)" data-url="https://ohmycloud.github.io/2015/08/31/Perl6中的操作符-一/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="焉知非鱼" />
          <p class="site-author-name" itemprop="name">焉知非鱼</p>
          <p class="site-description motion-element" itemprop="description">Young For Perl 6</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">161</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">177</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/ohmycloud" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/740011611" target="_blank" title="weibo">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  weibo
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.jianshu.com/u/9b20c7d63b77" target="_blank" title="简书">
                  
                    <i class="fa fa-fw fa-location-arrow"></i>
                  
                  简书
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://perl6.org/" target="_blank" title="Perl 6">
                  
                    <i class="fa fa-fw fa-paper-plane"></i>
                  
                  Perl 6
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#操作符优先级"><span class="nav-number">1.</span> <span class="nav-text">操作符优先级</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Term-precedence"><span class="nav-number">1.0.0.1.</span> <span class="nav-text">Term precedence</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#方法后缀优先级"><span class="nav-number">1.0.0.2.</span> <span class="nav-text">方法后缀优先级</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#自增优先级"><span class="nav-number">1.0.0.3.</span> <span class="nav-text">自增优先级</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#重复操作符"><span class="nav-number">1.1.</span> <span class="nav-text">重复操作符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#字符串连接"><span class="nav-number">1.2.</span> <span class="nav-text">字符串连接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#范围对象创建"><span class="nav-number">1.3.</span> <span class="nav-text">范围对象创建</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#逗号操作符优先级"><span class="nav-number">1.4.</span> <span class="nav-text">逗号操作符优先级</span></a></li></ol></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2015 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">焉知非鱼</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  托管在 -
  <a class="theme-link" href="https://github.com/ohmycloud/ohmycloud.github.io">
    Github
  </a>
  &nbsp; | &nbsp;
</div>

<div class="theme-info">
 <a class="51-img" href="/images/footer.gif" target="_blank"><img alt="统计" src="/images/footer.gif"  align="right" /></a>
<div>
        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"chenyf"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    <script src="/vendors/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  






  
  
  

  

  

</body>
</html>
