<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|monospace:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Perl 6,Ruby," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="Perl 6 from Ruby - Nutshell
基本语法语句结束分号Ruby 使用换行(有几个例外)来探测大部分语句的结束, 只要表达式已经完成。通过把运算符挂在行的末尾以保证解析会继续而打断一个长的表达式的做法很常见:">
<meta property="og:type" content="article">
<meta property="og:title" content="Perl 6 From Ruby - Nutshell">
<meta property="og:url" content="https://ohmycloud.github.io/2016/10/17/Perl6FromRuby/index.html">
<meta property="og:site_name" content="Perl 6 青春小站">
<meta property="og:description" content="Perl 6 from Ruby - Nutshell
基本语法语句结束分号Ruby 使用换行(有几个例外)来探测大部分语句的结束, 只要表达式已经完成。通过把运算符挂在行的末尾以保证解析会继续而打断一个长的表达式的做法很常见:">
<meta property="og:updated_time" content="2016-10-23T16:07:53.884Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Perl 6 From Ruby - Nutshell">
<meta name="twitter:description" content="Perl 6 from Ruby - Nutshell
基本语法语句结束分号Ruby 使用换行(有几个例外)来探测大部分语句的结束, 只要表达式已经完成。通过把运算符挂在行的末尾以保证解析会继续而打断一个长的表达式的做法很常见:">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"hide"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="https://ohmycloud.github.io/2016/10/17/Perl6FromRuby/"/>

  <title> Perl 6 From Ruby - Nutshell | Perl 6 青春小站 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Perl 6 青春小站</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>
 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Perl 6 From Ruby - Nutshell
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-17T17:55:34+08:00" content="2016-10-17">
              2016-10-17
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Perl-6/" itemprop="url" rel="index">
                    <span itemprop="name">Perl 6</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/10/17/Perl6FromRuby/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/10/17/Perl6FromRuby/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><a href="https://docs.perl6.org/language/rb-nutshell" target="_blank" rel="external">Perl 6 from Ruby - Nutshell</a></p>
<h2 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h2><h3 id="语句结束分号"><a href="#语句结束分号" class="headerlink" title="语句结束分号"></a>语句结束分号</h3><p>Ruby 使用换行(有几个例外)来探测大部分语句的结束, 只要表达式已经完成。通过把运算符挂在行的末尾以保证解析会继续而打断一个长的表达式的做法很常见:</p>
<a id="more"></a>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">foo +     <span class="comment"># 在 Ruby  中结尾的运算符意味着解析会继续</span></div><div class="line">  bar +</div><div class="line">  baz</div></pre></td></tr></table></figure>
<p>在 Perl 6 中你必须显式地使用 <code>;</code> 来结束语句, 这允许更好的反馈和更灵活的断行。有两个例外不需要显式的 <code>;</code>,  块儿中的最后一条语句, 在块自身的闭合花括号<strong>之后</strong>(如果那一行上没有任何其它东西):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">if 5 &lt; $x &lt; 10 &#123;</div><div class="line">    say &quot;Yep!&quot;;</div><div class="line">    $x = 17     # 在闭合花括号 &#125; 之前不需要分号 ;</div><div class="line">&#125;               # 因为换行, 在闭合花括号 &#125; 之后不需要分号 ;</div><div class="line">say &quot;Done!&quot;;    # 如果后面什么也没有, 那么这儿的分号也不需要</div></pre></td></tr></table></figure>
<h3 id="空白"><a href="#空白" class="headerlink" title="空白"></a>空白</h3><p>Ruby 中允许使用大量令人吃惊的灵活的空白, 即使在开启了严格模式和警告的情况下:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 不符合习惯但是在 Ruby 中是合法的</span></div><div class="line">puts<span class="string">"Hello "</span>+</div><div class="line">(people [ i]</div><div class="line">    . name</div><div class="line">    ) . upcase+<span class="string">"!"</span><span class="keyword">if</span>$greeted[i]&lt;<span class="number">1</span></div></pre></td></tr></table></figure>
<p>Perl  6 也遵从程序员的自由和创造力，但是平衡的语法灵活性与其设计目标是一致的—确定性的，可扩展的语法，支持单程解析和有用的错误消息，组合功能，如利落地自定义运算符，不会导致程序员意外弄错他们的意图。 此外，不再强调 “代码高尔夫”; Perl 6 在概念上更为简洁, 而不是在少敲了几次键上。</p>
<p>因此，在语法中有很多地方，在 Ruby 中空格是可选的但是在 Perl 6 中却是强制的或禁止的。许多这些限制不太可能涉及很多现实的 Perl 代码（例如，在数组变量和它的方括号之间不允许有空格 ），但不幸的是有一些与某些 Ruby 黑客的习惯编码风格冲突：</p>
<ul>
<li>在参数列表的开括号「<code>(</code>」之前不允许有空格</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">foo (3, 4, 1); # 在 Ruby 或 Perl 6 中都不正确 ( 在 Perl 6 中这会</div><div class="line">               # 尝试为 foo 传递一个 List 类型的单个参数)</div><div class="line">foo(3, 4, 1);  # Ruby 和 Perl 6 中都可以</div><div class="line">foo 3, 4, 1;   # Ruby 和 Perl 6 中都可以 - 圆括号是可供选择的-less style</div></pre></td></tr></table></figure>
<ul>
<li>关键字后面立刻需要跟着空格</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">if(a &lt; 0); ...; end         # OK in Ruby</div><div class="line">if ($a &lt; 0) &#123; ... &#125;         # Perl 6</div><div class="line">if $a &lt; 0   &#123; ... &#125;         # Perl 6, 更地道</div><div class="line"></div><div class="line">while(x &gt; 5); ...; end      # OK in Ruby</div><div class="line">while ($x &gt; 5) &#123; ... &#125;      # Perl 6</div><div class="line">while $x &gt; 5   &#123; ... &#125;      # Perl 6, 更地道</div></pre></td></tr></table></figure>
<ul>
<li>后缀/后环缀 操作符(包括数组/散列下标)前面不允许有空格。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">seen [ :fish ] = 1    # Ruby, 不地道, 但是允许这样写</div><div class="line">%seen&lt; fish &gt; = 1;    # Perl 6, &apos;seen&apos; 后面不允许出现空格</div></pre></td></tr></table></figure>
<ul>
<li>中缀操作符之前需要空格, 如果它和已经存在的后缀/后环缀 操作符冲突的话。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">n&lt;1     # Ruby (in Perl 6 this would conflict with postcircumfix &lt; &gt;)</div><div class="line">$n &lt; 1; # Perl 6</div></pre></td></tr></table></figure>
<h3 id="方法调用-send"><a href="#方法调用-send" class="headerlink" title="方法调用, .send"></a>方法调用, .send</h3><p>方法调用使用点语法, 就像 Ruby 那样:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">person.name    # Ruby</div><div class="line">$person.name   # Perl 6</div></pre></td></tr></table></figure>
<p>要调用一个直到运行时才直到名字的方法:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">object.send(methodname, args);  # Ruby</div><div class="line">$object.&quot;$methodname&quot;(@args);   # Perl 6</div></pre></td></tr></table></figure>
<p>如果你遗漏了双引号, 那么 Perl 6 会期望 <code>$methodname</code> 包含一个 <code>Method</code> 对象, 而不是单单是那个方法名的字符串表示。</p>
<h3 id="变量、符号、作用域-和通用类型"><a href="#变量、符号、作用域-和通用类型" class="headerlink" title="变量、符号、作用域 和通用类型"></a>变量、符号、作用域 和通用类型</h3><p>在 Ruby 中，变量主要使用 sigils 指示作用域。 <code>$</code> 用于全局作用域，<code>@@</code> 用于类作用域，<code>@</code> 用作实例作用域，无符号用于局部变量（包括参数）。 <code>&amp;</code> 符号也用于表示方法引用。符号的前缀为 <code>:</code>，但它们不是可变的，所以不是真正的符号。</p>
<p>在 Perl 6 中，符号主要用于指代包含的值实现的角色，表明值的类型（或至少接口）。 符号是不变的，不管变量是如何使用的 - 你可以把它们看作变量名的一部分。</p>
<p>变量的作用域改为由声明本身（my，has，our，etc）表示。</p>
<h4 id="变量作用域"><a href="#变量作用域" class="headerlink" title="变量作用域"></a>变量作用域</h4><p>对于局部变量，Ruby 在赋值时使用隐式变量声明，并限于当前块。 在 Ruby 中，if 或 while 内置结构的内容不是块或作用域。</p>
<p>Perl 6 使用显式作用域指示符，并且不会隐式地创建变量。 每一个地方你看到的 <code>{...}</code> 都是一个作用域，它包括一个条件或循环的主体。 常用的作用域声明：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">foo = 7        # Ruby, variable scope is defined by first assignment and</div><div class="line">               # extends to the end of the current block</div><div class="line"></div><div class="line">my  $foo = 7   # Perl 6, lexical scoped to the current block</div><div class="line">our $foo = 7   # Perl 6, package scoped</div><div class="line">has $!foo = 7  # Perl 6, instance scoped (attribute)</div></pre></td></tr></table></figure>
<h4 id="标量"><a href="#标量" class="headerlink" title="$ 标量"></a><code>$</code> 标量</h4><p><code>$</code> 符号始终与”标量”变量（例如 <code>$name</code>）一起使用。这些是单值(single-value) 容器。</p>
<p>这是最通用的变量类型，对其内容没有限制。 注意，你仍然可以寻址/使用它的内容，如 <code>$x[1]</code>，<code>$x{&quot;foo&quot;}</code> 和 <code>$f(&quot;foo&quot;)</code>。</p>
<h4 id="数组"><a href="#数组" class="headerlink" title="@ 数组"></a><code>@</code> 数组</h4><p><code>@</code> 总是与”数组”变量一起使用（例如 <code>@months</code>，<code>@months[2]</code>，<code>@months[2,4]</code> 用于数组切片）。 使用 <code>@</code> 符号的变量只能包含执行 Positional 角色的东西，Positional 角色指的是位置索引和切片功能。</p>
<ul>
<li>索引</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">puts months[2]; # Ruby</div><div class="line">say @months[2]; # Perl 6</div></pre></td></tr></table></figure>
<ul>
<li>值切片</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">puts months[8..11].join(&apos;,&apos;) # Ruby</div><div class="line">say @months[8..11].join(&apos;,&apos;) # Perl 6</div></pre></td></tr></table></figure>
<h4 id="散列"><a href="#散列" class="headerlink" title="% 散列"></a><code>%</code> 散列</h4><p><code>%</code> 符号始终与”散列”变量一起使用（例如<code>%calories</code>, <code>%calories&lt;apple&gt;</code>, <code>%calories&lt;pear plum&gt;</code>）。 使用 <code>%</code> 符号的变量只能包含执行关联(<code>Associative</code>)角色的内容。</p>
<p>Ruby 使用方括号来访问数组和哈希值。 Perl 6 使用花括号来代替散列。 尖括号版本也是可用的，它总是自动引起其内容（不带引号的字符串）：</p>
<p>副词可以用来控制切片的类型。</p>
<ul>
<li>索引</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">puts calories[&quot;apple&quot;]  # Ruby</div><div class="line">say %calories&#123;&quot;apple&quot;&#125;; # Perl 6</div><div class="line"></div><div class="line">puts calories[&quot;apple&quot;]  # Ruby</div><div class="line">puts calories[:apple]   # Ruby, symbols for keys are common</div><div class="line">say %calories&lt;apple&gt;;   # Perl 6 - angle brackets instead of single-quotes</div><div class="line">say %calories«$key»;    # Perl 6 - double angles interpolate as double-quotes</div></pre></td></tr></table></figure>
<ul>
<li>值切片</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">puts calories.values_at(&apos;pear&apos;, &apos;plum&apos;).join(&apos;,&apos;) # Ruby</div><div class="line">puts calories.values_at(%w(pear plum)).join(&apos;,&apos;)  # Ruby, pretty?</div><div class="line"></div><div class="line">say %calories&#123;&apos;pear&apos;, &apos;plum&apos;&#125;.join(&apos;,&apos;);          # Perl 6</div><div class="line">say %calories&lt;pear plum&gt;.join(&apos;,&apos;);               # Perl 6 (prettier)</div><div class="line">my $keys = &apos;pear plum&apos;;</div><div class="line">say %calories«$keys».join(&apos;,&apos;); # Perl 6, interpolated split</div></pre></td></tr></table></figure>
<ul>
<li>键/值切片</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">say calories.slice(&apos;pear&apos;, &apos;plum&apos;).join(&apos;,&apos;); # Ruby, with ActiveRecord</div><div class="line">say %calories&#123;&apos;pear&apos;, &apos;plum&apos;&#125;:kv.join(&apos;,&apos;);   # Perl 6 - 使用 :kv 副词</div><div class="line">say %calories&lt;pear plum&gt;:kv.join(&apos;,&apos;);        # Perl 6 (更好看的版本)</div></pre></td></tr></table></figure>
<h4 id="amp-Sub"><a href="#amp-Sub" class="headerlink" title="&amp; Sub"></a><code>&amp;</code> Sub</h4><p><code>&amp;</code> 符号与 Ruby 的 <code>&amp;</code> 非常类似，用于引用一个具名的子例程/操作符的函数对象，而不调用它，即把名字用作”名词”而不是”动词”。 使用 <code>&amp;</code> 符号的变量只能包含 <code>Callable</code> 角色的内容。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">add = -&gt; n, m &#123; n + m &#125; # Ruby lambda for an addition function</div><div class="line">add.(2, 3)              # =&gt; 5, Ruby invocation of a lambda</div><div class="line">add.call(2, 3)          # =&gt; 5, Ruby invocation of a lambda</div><div class="line"></div><div class="line">my &amp;add = -&gt; $n, $m &#123; $n + $m &#125; # Perl 6 addition function</div><div class="line">&amp;add(2, 3)                      # =&gt; 5, you can keep the sigil</div><div class="line">add(2, 3)                       # =&gt; 5, and it works without it</div><div class="line"></div><div class="line">foo_method = &amp;foo;     # Ruby</div><div class="line">my &amp;foo_method = &amp;foo; # Perl 6</div><div class="line"></div><div class="line">some_func(&amp;say) # Ruby pass a function reference</div><div class="line">some_func(&amp;say) # Perl 6 passes function references the same way</div></pre></td></tr></table></figure>
<p>通常在 Ruby 中，我们传递一个块作为最后一个参数，这是特别用于 DSL 中。 这可以是通过 <code>yield</code> 调用的隐式参数，也可以是带有前缀 <code>&amp;</code> 的显式块。 在 Perl 6 中，Callable 参数总是被变量名称（而不是yield）列出和调用，并且有多种调用函数的方法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"># Ruby, declare a method and call the implicit block argument</div><div class="line">def f</div><div class="line">  yield 2</div><div class="line">end</div><div class="line"></div><div class="line"># Ruby, invoke f, pass it a block with 1 argument</div><div class="line">f do |n|</div><div class="line">  puts &quot;Hi #&#123;n&#125;&quot;</div><div class="line">end</div><div class="line"></div><div class="line"># Perl 6, declare a method with an explicit block argument</div><div class="line">sub f(&amp;g:($)) &#123;</div><div class="line">  g(2)</div><div class="line">&#125;</div><div class="line"></div><div class="line"># Perl 6, invoke f, pass it a block with 1 argument</div><div class="line"># There are several other ways to do this</div><div class="line">f(-&gt; $n &#123; say &quot;Hi &#123;$n&#125;&quot; &#125;) # Explicit argument</div><div class="line">f -&gt; $n &#123; say &quot;Hi &#123;$n&#125;&quot; &#125;  # Explicit argument, no parenthesis</div><div class="line">f &#123; say &quot;Hi &#123;$^n&#125;&quot; &#125;       # Implicit argument</div><div class="line"></div><div class="line"># Additionally, if &apos;f&apos; is a method on instance &apos;obj&apos; you can use C&lt;:&gt;</div><div class="line"># instead of parenthesis</div><div class="line">obj.f(-&gt; $n &#123; say &quot;Hi &#123;$n&#125;&quot; &#125;)  # Explicit argument</div><div class="line">obj.f: -&gt; $n &#123; say &quot;Hi &#123;$n&#125;&quot; &#125;  # Explicit argument, no parenthesis</div><div class="line">obj.f: &#123; say &quot;Hi &#123;$^n&#125;&quot; &#125;       # Implicit argument, no parenthesis</div></pre></td></tr></table></figure>
<h4 id="吞噬参数-参数扩展"><a href="#吞噬参数-参数扩展" class="headerlink" title="* 吞噬参数/ 参数扩展"></a><code>*</code> 吞噬参数/ 参数扩展</h4><p>在 Ruby 中，你可以声明一个参数，使用 <code>*</code> 前缀将所传递参数的剩余部分传递到数组中。 它在 Perl 6 中的工作方式相同：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">def foo(*args); puts &quot;I got #&#123;args.length&#125; args!&quot;; end # Ruby</div><div class="line">sub foo(*@args) &#123; say &quot;I got #&#123;@args.elems&#125; args!&quot; &#125;   # Perl 6</div></pre></td></tr></table></figure>
<p>您可能想将数组扩展为一组参数。 在 Perl 6 中，这也使用 <code>*</code> 前缀：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">args = %w(a b c)         # Ruby</div><div class="line">foo(*args)</div><div class="line"></div><div class="line">my @args = &lt;a b c&gt;       # Perl 6</div><div class="line">foo(*@args)</div></pre></td></tr></table></figure>
<p>Perl 6 有许多更高级的传递参数和接收参数的方法，参见<a href="https://docs.perl6.org/language/functions#Signatures" target="_blank" rel="external">签名</a>和<a href="https://docs.perl6.org/type/Capture" target="_blank" rel="external">捕获</a>。</p>
<h4 id="Twigils"><a href="#Twigils" class="headerlink" title="Twigils"></a>Twigils</h4><p>Perl 6 另外还使用 “twigs”，它是关于变量的进一步指示符，并且在符号和变量名的其余部分之间。 例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">$foo     # Scalar with no twigil</div><div class="line">$!foo    # 私有实例变量</div><div class="line">$.foo    # Instance variable accessor</div><div class="line">$*foo    # Dynamically scoped variable</div><div class="line">$^foo    # A positional (placeholder) parameter to a block</div><div class="line">$:foo    # 具名参数</div><div class="line">$=foo    # POD (文档) 变量</div><div class="line">$?FILE   # Current source filename. ? twigil 表明这是一个编译时值</div><div class="line">$~foo    # Sublanguage seen by parser, uncommon</div></pre></td></tr></table></figure>
<p>虽然每个例子都使用 <code>$</code> 符号，但大多数可以使用 <code>@</code>（Positional）或 <code>%</code>（Associative）。</p>
<h4 id="符号"><a href="#符号" class="headerlink" title=": 符号"></a><code>:</code> 符号</h4><p>Perl 6 通常在 Ruby 使用符号的地方使用字符串。 关于这点的一个主要例子是散列键。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">address[:joe][:street] # Typical Ruby nested hash with symbol keys</div><div class="line">%address&lt;joe&gt;&lt;street&gt;  # Typical Perl 6 nested hash with string keys</div></pre></td></tr></table></figure>
<p>Perl 6 有冒号对语法，有时看起来像Ruby符号。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">:age            # Ruby symbol</div><div class="line"></div><div class="line"># All of these are equivalent for Perl 6</div><div class="line">:age            # Perl 6 pair with implicit True value</div><div class="line">:age(True)      # Perl 6 pair with explicit True value</div><div class="line">age =&gt; True     # Perl 6 pair using arrow notation</div><div class="line">&quot;age&quot; =&gt; True   # Perl 6 pair using arrow notation and explicit quotes</div></pre></td></tr></table></figure>
<p>很多时候你可能会使用一个没有显式值的冒号对，并假装它是一个 Ruby 符号，但它不是惯用的 Perl 6。</p>
<h2 id="操作符"><a href="#操作符" class="headerlink" title="操作符"></a>操作符</h2><p>许多操作符在 Ruby 和 Perl 6 中有类似的用法：</p>
<ul>
<li>, 列表分割符</li>
<li><code>+</code> 数值加法</li>
<li><code>-</code> 数值减法</li>
<li><code>*</code> 数值乘法</li>
<li>/ 数值除法</li>
<li>% 数值求模</li>
<li>** 数值指数</li>
<li>! &amp;&amp; || 布尔, 高优先级</li>
<li>not and or 布尔, 低优先级</li>
</ul>
<p>您可以使用 <code>$x++</code> 而不是 <code>x += 1</code> 作为递增变量的快捷方式。这可以用作预增量 <code>++$x</code>（增量，返回新值）或后增量 <code>$x++</code>（增量，返回旧值）。</p>
<p>您可以使用 <code>$x--</code> 而不是 <code>x -= 1</code> 作为递减变量的快捷方式。这可以用作预减量 <code>--$x</code>（递减，返回新值）或递减后 <code>$x--</code>（递减，返回旧值）。</p>
<h3 id="lt-gt-lt-gt-比较"><a href="#lt-gt-lt-gt-比较" class="headerlink" title="== != &lt; &gt; &lt;= &gt;= 比较"></a>== != &lt; &gt; &lt;= &gt;= 比较</h3><p>Perl 6 中, 数字和字符串之间比较是分开的，以避免常见错误。</p>
<ul>
<li><p>== != &lt; &gt; &lt;= &gt;= 比较</p>
</li>
<li><p>eq ne lt gt le ge 字符串比较</p>
</li>
</ul>
<p>例如，使用 <code>==</code> 尝试将值转换为数字，并且 <code>eq</code> 尝试将值转换为字符串。</p>
<h3 id="lt-gt-三向比较"><a href="#lt-gt-三向比较" class="headerlink" title="&lt;=&gt; 三向比较"></a><code>&lt;=&gt;</code> 三向比较</h3><p>在 Ruby 中，<code>&lt;=&gt;</code> 运算符返回 -1,0 或1。 在 Perl 6 中，它们返回 <code>Order :: Less</code>，<code>Order :: Same</code> 或 <code>Order :: More</code>。</p>
<p><code>&lt;=&gt;</code> 用于强制数字上下文比较。</p>
<p><code>leg</code>（”Less，Equal 或者 Greater?”）用于强制字符串上下文比较。</p>
<p><code>cmp</code> 要么是 <code>&lt;=&gt;</code> 比较, 要么是 <code>leg</code> 比较，这取决于它的参数的现有类型。</p>
<h3 id="智能匹配运算符"><a href="#智能匹配运算符" class="headerlink" title="~~ 智能匹配运算符"></a><code>~~</code> 智能匹配运算符</h3><p>这是一个非常常见的匹配运算符，它不存在于 Ruby 中。这里有些例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">say &quot;match!&quot; if $foo ~~ /bar/;      # Regex match</div><div class="line">say &quot;match!&quot; if $foo ~~ &quot;bar&quot;;      # String match</div><div class="line">say &quot;match!&quot; if $foo ~~ :(Int, Str) # Signature match (destructure)</div></pre></td></tr></table></figure>
<p>参见 <a href="https://design.perl6.org/S03.html#Smart_matching" target="_blank" rel="external">S03/智能匹配</a></p>
<h3 id="amp-数字位操作"><a href="#amp-数字位操作" class="headerlink" title="&amp; | ^ 数字位操作"></a>&amp; | ^ 数字位操作</h3><h3 id="amp-布尔运算"><a href="#amp-布尔运算" class="headerlink" title="&amp; | ^ 布尔运算"></a>&amp; | ^ 布尔运算</h3><p>在 Perl 6 中，这些单字符操作被移除了，并被两个字符操作代替，它们将它们的参数强制到所需的上下文中。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"># Infix ops (two arguments; one on each side of the op)</div><div class="line">+&amp;  +|  +^  And Or Xor: Numeric</div><div class="line">~&amp;  ~|  ~^  And Or Xor: String</div><div class="line">?&amp;  ?|  ?^  And Or Xor: Boolean</div><div class="line"></div><div class="line"># Prefix ops (one argument, after the op)</div><div class="line">+^  Not: Numeric</div><div class="line">~^  Not: String</div><div class="line">?^  Not: Boolean (same as the ! op)</div></pre></td></tr></table></figure>
<h3 id="amp-条件链式操作符"><a href="#amp-条件链式操作符" class="headerlink" title="&amp;. 条件链式操作符"></a><code>&amp;.</code> 条件链式操作符</h3><p>Ruby 使用  <code>&amp;.</code> 运算符链接方法，而不会在一个返回 nil 的调用中产生错误。在 Perl 6 中因为同样的目的使用 <code>.?</code>。</p>
<h3 id="lt-lt-gt-gt-数值左-右移位操作符，铲-shovel-操作符"><a href="#lt-lt-gt-gt-数值左-右移位操作符，铲-shovel-操作符" class="headerlink" title="&lt;&lt; &gt;&gt; 数值左/右移位操作符，铲(shovel)操作符"></a>&lt;&lt; &gt;&gt; 数值左/右移位操作符，铲(shovel)操作符</h3><p>替换为 <code>+&lt;</code> 和 <code>+&gt;</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">puts 42 &lt;&lt; 3  # Ruby</div><div class="line">say  42 +&lt; 3; # Perl 6</div></pre></td></tr></table></figure>
<p>注意，Ruby 经常使用 <code>&lt;&lt;</code> 运算符作为”铲操作符”，这类似于<code>.push</code>。这种用法在 Perl 6 中不常见。</p>
<h3 id="gt-和-键-值分隔符"><a href="#gt-和-键-值分隔符" class="headerlink" title="=&gt;和 : 键-值分隔符"></a><code>=&gt;</code>和 <code>:</code> 键-值分隔符</h3><p>在 Ruby 中，<code>=&gt;</code> 用于 Hash 字面声明和参数传递的键/值对的上下文中。 当左边是符号时用 <code>:</code> 作速记符。</p>
<p>在 Perl 6 中，<code>=&gt;</code> 是对(Pair)运算符，这在原理上是非常不同的，但在许多情况下工作相同。</p>
<p>如果你在哈希字面值中使用 <code>=&gt;</code>，那么用法非常类似：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">hash = &#123; &quot;AAA&quot; =&gt; 1, &quot;BBB&quot; =&gt; 2 &#125;  # Ruby, though symbol keys are more common</div><div class="line">my %hash = ( AAA =&gt; 1, BBB =&gt; 2 ); # Perl 6, uses ()&apos;s though &#123;&#125; usually work</div></pre></td></tr></table></figure>
<h3 id="三目运算符"><a href="#三目运算符" class="headerlink" title="?: 三目运算符"></a><code>?:</code> 三目运算符</h3><p>在 Perl 6 中，这被拼写为两个问号，而不是一个问号，和两个感叹号而不是一个冒号。这种与常见三目运算符的偏离消除了多种歧义的情况，并使得假的情况更突出。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">result     = (  score &gt; 60 )  ? &apos;Pass&apos;  : &apos;Fail&apos;; # Ruby</div><div class="line">my $result = ( $score &gt; 60 ) ?? &apos;Pass&apos; !! &apos;Fail&apos;; # Perl 6</div></pre></td></tr></table></figure>
<h3 id="字符串连接"><a href="#字符串连接" class="headerlink" title="+ 字符串连接"></a><code>+</code> 字符串连接</h3><p>替换为波浪线符号（<code>~</code>）。助记符：想想用针和线缝合两个字符串。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$food = &apos;grape&apos; + &apos;fruit&apos;  # Ruby</div><div class="line">$food = &apos;grape&apos; ~ &apos;fruit&apos;; # Perl 6</div></pre></td></tr></table></figure>
<h3 id="字符串插值"><a href="#字符串插值" class="headerlink" title="字符串插值"></a>字符串插值</h3><p>在 Ruby 中，”#{foo}s” 界定嵌入在双引号字符串中的块。在 Perl 6 中删除 <code>#</code> 前缀：”{$foo}s”。和 Ruby 一样，你可以将任意代码放在嵌入式块中，它将在字符串上下文中渲染。</p>
<p>简单变量可以插入到双引号字符串中，而不使用块语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"># Ruby</div><div class="line">name = &quot;Bob&quot;</div><div class="line">puts &quot;Hello! My name is #&#123;name&#125;!&quot;</div><div class="line"></div><div class="line"># Perl 6</div><div class="line">my $name = &quot;Bob&quot;</div><div class="line">say &quot;Hello! My name is $name!&quot;</div></pre></td></tr></table></figure>
<p>Ruby 中的嵌入式块的结果使用 <code>.to_s</code> 来获取字符串上下文。 Perl 6 使用 <code>.Str</code> 或 <code>.gist</code> 得到相同的效果。</p>
<h2 id="复合语句"><a href="#复合语句" class="headerlink" title="复合语句"></a>复合语句</h2><h3 id="条件"><a href="#条件" class="headerlink" title="条件"></a>条件</h3><h4 id="if-elsif-else-unless§"><a href="#if-elsif-else-unless§" class="headerlink" title="if elsif else unless§"></a>if elsif else unless§</h4><p>这在 Ruby 和 Perl 6 之间非常相似，但是 Perl 6 使用 <code>{}</code> 来清楚地描述块。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"># Ruby</div><div class="line">if x &gt; 5</div><div class="line">    puts &quot;Bigger!&quot;</div><div class="line">elsif x == 5</div><div class="line">    puts &quot;The same!&quot;</div><div class="line">else</div><div class="line">    puts &quot;Smaller!&quot;</div><div class="line">end</div><div class="line"></div><div class="line"># Perl 6</div><div class="line">if x &gt; 5 &#123;</div><div class="line">    say &quot;Bigger!&quot;</div><div class="line">&#125; elsif x == 5 &#123;</div><div class="line">    puts &quot;The same!&quot;</div><div class="line">&#125; else &#123;</div><div class="line">    puts &quot;Smaller!&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>将条件表达式绑定到变量上有一点不同：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">if x = dostuff(); ...; end   # Ruby</div><div class="line">if dostuff() -&gt; $x &#123;...&#125;     # Perl 6, block-assignment uses arrow</div></pre></td></tr></table></figure>
<p><code>unless</code> 条件仅允许 Perl 6 中的单个块; 它不允许 <code>elsif</code> 或 <code>else</code> 子句。</p>
<h4 id="cese-when"><a href="#cese-when" class="headerlink" title="cese-when"></a><code>cese-when</code></h4><p>Perl 6 的 <code>given-when</code> 结构像一个 <code>if-elsif-else</code> 语句链或者类似于 Ruby 中的 <code>case-when</code>。一个很大的区别是，Ruby 使用 <code>==</code> 比较每个条件，但 Perl 6 使用更一般的智能匹配 <code>~~</code> 运算符。</p>
<p>它具有以下一般结构：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">given EXPR &#123;</div><div class="line">    when EXPR &#123; ... &#125;</div><div class="line">    when EXPR &#123; ... &#125;</div><div class="line">    default &#123; ... &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在其最简单的形式中，构造如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">given $value &#123;</div><div class="line">    when &quot;a match&quot; &#123;</div><div class="line">        do-something();</div><div class="line">    &#125;</div><div class="line">    when &quot;another match&quot; &#123;</div><div class="line">        do-something-else();</div><div class="line">    &#125;</div><div class="line">    default &#123;</div><div class="line">        do-default-thing();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这在 <code>when</code> 语句中匹配标量值的情况下是简单的。更一般地，匹配实际上是对输入值的智能匹配，使得可以使用更复杂的诸如正则表达式的实体的而非标量值来查找。</p>
<h3 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h3><h4 id="while-until"><a href="#while-until" class="headerlink" title="while until"></a>while until</h4><p>大部分不变;圆括号周围的条件是可选的，但如果使用了，不能立即跟随关键字，否则它将被视为一个函数调用。将条件表达式绑定到变量上也有一些不同：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">while x = dostuff(); ...; end    # Ruby</div><div class="line">while dostuff() -&gt; $x &#123;...&#125;      # Perl 6</div></pre></td></tr></table></figure>
<h4 id="for-each"><a href="#for-each" class="headerlink" title="for .each"></a>for .each</h4><p>for 循环在 Ruby 中是罕见的，我们通常在可枚举上使用 <code>.each</code>。对 Perl 6 的最直接的翻译是对 <code>.each</code> 和 <code>.map</code> 都使用 <code>.map</code>，但是我们通常直接使用 <code>for</code> 循环。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"># Ruby for loop</div><div class="line">for n in 0..5</div><div class="line">    puts &quot;n: #&#123;n&#125;&quot;</div><div class="line">end</div><div class="line"></div><div class="line"># Ruby, more common usage of .each</div><div class="line">(0..5).each do |n|</div><div class="line">    puts &quot;n: #&#123;n&#125;&quot;</div><div class="line">end</div><div class="line"></div><div class="line"># Perl 6</div><div class="line">for 0..5 -&gt; $n &#123;</div><div class="line">    say &quot;n: $n&quot;;</div><div class="line">&#125;</div><div class="line"></div><div class="line"># Perl 6, mis-using .map</div><div class="line">(0..5).map: -&gt; $n &#123;</div><div class="line">    say &quot;n: $n&quot;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在 Ruby 中，.each 的迭代变量是列表元素的副本，修改它对原始列表没有影响。请注意，它是 REFERENCE 的副本，因此您仍然可以更改其引用的值。</p>
<p>在 Perl 6 中，该别名是只读的（为了安全起见），因此它的行为与 Ruby 完全一样，除非把 <code>-&gt;</code> 改为 <code>&lt;-&gt;</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">cars.each &#123; |car| ... &#125;    # Ruby; read-only reference</div><div class="line">for @cars  -&gt; $car   &#123;...&#125; # Perl 6; read-only</div><div class="line">for @cars &lt;-&gt; $car   &#123;...&#125; # Perl 6; read-write</div></pre></td></tr></table></figure>
<h3 id="流程中断语句"><a href="#流程中断语句" class="headerlink" title="流程中断语句"></a>流程中断语句</h3><p>与 Ruby 相同：</p>
<ul>
<li>next</li>
<li>redo</li>
<li>break</li>
</ul>
<p>这在 Perl 6 中是 <code>last</code>。</p>
<h2 id="正则表达式（Regex-Regexp）"><a href="#正则表达式（Regex-Regexp）" class="headerlink" title="正则表达式（Regex / Regexp）"></a>正则表达式（Regex / Regexp）</h2><p>Perl 6 中的正则表达式与 Ruby 中的正则表达式明显不同，它更强大。例如，默认情况下，Perl 6 将忽略空格，所有字符必须转移。正则表达式可以很容易地以组合和声明的方式建立高效的 grammars。</p>
<p>有很多强大的 Perl 6 regex 的特性，特别是使用相同的语法定义整个 gramamrs。请参阅<a href="https://docs.perl6.org/language/regexes" target="_blank" rel="external">正则表达式</a>和 <a href="https://docs.perl6.org/language/grammars" target="_blank" rel="external">Grammars</a>。</p>
<h3 id="match-方法和-运算符"><a href="#match-方法和-运算符" class="headerlink" title=".match 方法和 =~ 运算符"></a>.match 方法和 =~ 运算符</h3><p>在 Ruby 中，可以使用 <code>=~</code> regexp 匹配运算符或 <code>.match</code> 方法对变量执行正则表达式匹配。在 Perl 6 中，使用 ~~ 智能匹配运算符，或 <code>.match</code> 方法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">next if line   =~ /static/   # Ruby</div><div class="line">next if $line  ~~ /static/;  # Perl 6</div><div class="line"></div><div class="line">next if line  !~  /dynamic/ ; # Ruby</div><div class="line">next if $line !~~ /dynamic/ ; # Perl 6</div><div class="line"></div><div class="line">next if line.match(/static/)    # Ruby</div><div class="line">next if $line.match(/static/);  # Perl 6</div></pre></td></tr></table></figure>
<p>或者，可以使用 <code>.match</code>和 <code>.subst</code> 方法。注意 <code>.subst</code> 是不可变的。参见 <a href="https://design.perl6.org/S05.html#Substitution" target="_blank" rel="external">S05/替换</a>。</p>
<h3 id="sub-和-sub"><a href="#sub-和-sub" class="headerlink" title=".sub 和 .sub!"></a><code>.sub</code> 和 <code>.sub!</code></h3><p>在 Perl 6 中，通常使用 <code>s///</code> 运算符来执行正则表达式替换。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">fixed = line.sub(/foo/, &apos;bar&apos;)        # Ruby, non-mutating</div><div class="line">my $fixed = $line.subst(/foo/, &apos;bar&apos;) # Perl 6, non-mutating</div><div class="line"></div><div class="line">line.sub!(/foo/, &apos;bar&apos;)   # Ruby, mutating</div><div class="line">$line ~~ s/foo/bar/;      # Perl 6, mutating</div></pre></td></tr></table></figure>
<h3 id="正则表达式选项"><a href="#正则表达式选项" class="headerlink" title="正则表达式选项"></a>正则表达式选项</h3><p>将任何选项从正则表达式的结尾移动到开头。这可能需要您在 <code>/abc/</code> 等纯匹配中添加可选的 <code>m</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">next if $line =~    /static/i # Ruby</div><div class="line">next if $line ~~ m:i/static/; # Perl 6</div></pre></td></tr></table></figure>
<h3 id="空格被忽略，大多数东西必须被引起来"><a href="#空格被忽略，大多数东西必须被引起来" class="headerlink" title="空格被忽略，大多数东西必须被引起来"></a>空格被忽略，大多数东西必须被引起来</h3><p>为了帮助可读性和可重用性，在 Perl 6 的正则表达式中，空格并不重要。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">/this is a test/ # Ruby, boring string</div><div class="line">/this.*/         # Ruby, possibly interesting string</div><div class="line"></div><div class="line">/ this &quot; &quot; is &quot; &quot; a &quot; &quot; test / # Perl 6, each space is quoted</div><div class="line">/ &quot;this is a test&quot; / # Perl 6, quoting the whole string</div><div class="line">/ this .* /          # Perl 6, possibly interesting string</div></pre></td></tr></table></figure>
<h3 id="特殊匹配器通常属于-lt-gt-语法"><a href="#特殊匹配器通常属于-lt-gt-语法" class="headerlink" title="特殊匹配器通常属于 &lt;&gt; 语法"></a>特殊匹配器通常属于 <code>&lt;&gt;</code> 语法</h3><p>Perl 6 的正则表达式有很多支持特殊匹配语法的情况。它们不会全部列在这里，但通常不是被 <code>()</code> 包围，断言将被 <code>&lt;&gt;</code> 包围。</p>
<p>对于字符类，这意味着：</p>
<ul>
<li><code>[abc]</code> 变为 <code>&lt;[abc]&gt;</code></li>
<li><code>[^abc]</code> 变为 <code>&lt;-[abc]&gt;</code></li>
<li><code>[a-zA-Z]</code> 变为 <code>&lt;[a..zA..Z]&gt;</code></li>
<li><code>[[:upper:]]</code> 变为 <code>&lt;:upper&gt;</code></li>
<li><code>[abc[:upper:]]</code> 变为 <code>&lt;[abc]+:Upper&gt;</code></li>
</ul>
<p>对于环视断言：</p>
<ul>
<li><code>(?=[abc])</code> 变为 <code>&lt;?[abc]&gt;</code></li>
<li><code>(?=ar?bitrary* pattern)</code> 变为 <code>&lt;before ar?bitrary* pattern&gt;</code></li>
<li><code>(?!=[abc])</code> 变为 <code>&lt;![abc]&gt;</code></li>
<li><code>(?!=ar?bitrary* pattern)</code> 变为 <code>&lt;!before ar?bitrary* pattern&gt;</code></li>
<li><code>(?&lt;=ar?bitrary* pattern)</code> 变为 <code>&lt;after ar?bitrary* pattern&gt;</code></li>
<li><code>(?&lt;!ar?bitrary* pattern)</code> 变为 <code>&lt;!after ar?bitrary* pattern&gt;</code></li>
<li><code>(Unrelated to &lt;&gt; syntax, the &quot;lookaround&quot; /foo\Kbar/</code> 变为 <code>/foo &lt;( bar )&gt; /</code></li>
<li><code>(?(?{condition))yes-pattern|no-pattern)</code> 变为 <code>[ &lt;?{condition}&gt; yes-pattern | no-pattern ]</code></li>
</ul>
<h3 id="最长令牌匹配（LTM）替代交替"><a href="#最长令牌匹配（LTM）替代交替" class="headerlink" title="最长令牌匹配（LTM）替代交替"></a>最长令牌匹配（LTM）替代交替</h3><p>在 Perl 6 regexes 中，<code>|</code> 执行最长令牌匹配（LTM），它决定哪个备选分支根据一组规则赢得模棱两可的匹配，而不是根据在正则表达式中首先写出哪个备选分支。</p>
<p>要避免新的逻辑，请在你的 Ruby 正则表达式中把任何 <code>|</code> 更改为 <code>||</code>。</p>
<h2 id="文件相关操作"><a href="#文件相关操作" class="headerlink" title="文件相关操作"></a>文件相关操作</h2><h3 id="将文本文件的行读入数组"><a href="#将文本文件的行读入数组" class="headerlink" title="将文本文件的行读入数组"></a>将文本文件的行读入数组</h3><p>Ruby 和 Perl 6 都很容易将文件中的所有行读取到单个变量中，在这两种情况下，每一行都删除了换行符。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">lines = File.readlines(&quot;file&quot;)   # Ruby</div><div class="line">my @lines = &quot;file&quot;.IO.lines;     # Perl 6, create an IO object from a string</div></pre></td></tr></table></figure>
<h3 id="迭代文本文件的行"><a href="#迭代文本文件的行" class="headerlink" title="迭代文本文件的行"></a>迭代文本文件的行</h3><p>不建议将整个文件读入内存。 Perl 6 中的 <code>.lines</code> 方法返回一个延迟序列，但是赋值给数组会强制读取文件。最好迭代结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"># Ruby</div><div class="line">File.foreach(&quot;file&quot;) do |line|</div><div class="line">    puts line</div><div class="line">end</div><div class="line"></div><div class="line"># Perl 6</div><div class="line">for &quot;file&quot;.IO.lines -&gt; $line &#123;</div><div class="line">    say $line</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h2><h3 id="基本类，方法，属性"><a href="#基本类，方法，属性" class="headerlink" title="基本类，方法，属性"></a>基本类，方法，属性</h3><p>在 Ruby 和 Perl 6 之间类的定义是相似的。 Ruby 使用 <code>def</code> 定义方法，而 Perl 6 使用 <code>method</code> 定义方法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"># Ruby</div><div class="line">class Foo</div><div class="line">    def greet(name)</div><div class="line">        puts &quot;Hi #&#123;name&#125;!&quot;</div><div class="line">    end</div><div class="line">end</div><div class="line"></div><div class="line"># Perl 6</div><div class="line">class Foo &#123;</div><div class="line">    method greet($name) &#123;</div><div class="line">        say &quot;Hi $name!&quot;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在 Ruby 中，你可以使用一个属性而不预先声明它，你可以告诉它这是一个属性，因为 <code>@</code> 符号。您还可以使用 <code>attr_accessor</code> 及其变体轻松创建访问器。在 Perl 6 中，你使用 <code>has</code> 声明符和各种符号。你可以使用 <code>!</code> twigil 作为私有属性或 <code>.</code> 创建一个访问器。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"># Ruby</div><div class="line">class Person</div><div class="line">    attr_accessor :age    # Declare .age as an accessor method for @age</div><div class="line">    def initialize</div><div class="line">        @name = &apos;default&apos; # Assign default value to private instance var</div><div class="line">    end</div><div class="line">end</div><div class="line"></div><div class="line"># Perl 6</div><div class="line">class Person &#123;</div><div class="line">    has $.age;              # Declare $!age and accessor methods</div><div class="line">    has $!name = &apos;default&apos;; # Assign default value to private instance var</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>使用 <code>.new</code> 方法创建类的新实例。在 Ruby 中，您必须在 <code>initialize</code> 内根据需要手动给实例变量赋值。在 Perl 6 中，您将获得一个接受访问器属性的键/值对的默认构造函数，并可以在 <code>BUILD</code> 方法中进一步设置。像 Ruby 一样，你可以重写 <code>new</code> 自身以获取更高级的功能，但这是罕见的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"># Ruby</div><div class="line">class Person</div><div class="line">    attr_accessor :name, :age</div><div class="line">    def initialize(attrs)</div><div class="line">        @name = attrs[:name] || &apos;Jill&apos;</div><div class="line">        @age  = attrs[:age] || 42</div><div class="line">        @birth_year = Time.now.year - @age</div><div class="line">    end</div><div class="line">end</div><div class="line">p = Person.new( name: &apos;Jack&apos;, age: 23 )</div><div class="line"></div><div class="line"># Perl 6</div><div class="line">class Person</div><div class="line">    has $.name = &apos;Jill&apos;;</div><div class="line">    has $.age  = 42;</div><div class="line">    has $!birth_year;</div><div class="line">    method BUILD &#123;</div><div class="line">        $!birth_year = now.Date.year - $.age;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">p = Person.new( name =&gt; &apos;Jack&apos;, age =&gt; 23 )</div></pre></td></tr></table></figure>
<h3 id="私有方法"><a href="#私有方法" class="headerlink" title="私有方法"></a>私有方法</h3><p>Perl 6 中的私有方法声明的时候在他们的名字前置一个 <code>!</code> 符号，并且调用的时候使用 <code>!</code> 代替 <code>.</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"># Ruby</div><div class="line">class Foo</div><div class="line">    def visible</div><div class="line">        puts &quot;I can be seen!&quot;</div><div class="line">        hidden</div><div class="line">    end</div><div class="line"></div><div class="line">    private</div><div class="line">    def hidden</div><div class="line">        puts &quot;I cannot easily be called!&quot;</div><div class="line">    end</div><div class="line">end</div><div class="line"></div><div class="line"># Perl 6</div><div class="line">class Foo &#123;</div><div class="line">    method visible &#123;</div><div class="line">        say &quot;I can be seen!&quot;</div><div class="line">        self!hidden</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    method !hidden &#123;</div><div class="line">        say &quot;I cannot easily be called!&quot;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>一个重要的注意事项是，在 Ruby 中孩子对象可以看到父对象中的私有方法（所以他们更像是其他语言中的”受保护”的方法）。在 Perl 6 中，孩子对象不能调用父对象中的私有方法。</p>
<h3 id="元"><a href="#元" class="headerlink" title="元"></a>元</h3><p>这里有一些元编程的例子。注意，Perl 6 将元方法与常规方法分离开了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">person = Person.new       # Ruby, create a new person</div><div class="line">my $person = Person.new   # Perl 6, create a new person</div><div class="line"></div><div class="line">person.class              # Ruby, returns Person (class)</div><div class="line">$person.WHAT              # Perl 6, returns Person (class)</div><div class="line"></div><div class="line">person.methods            # Ruby</div><div class="line">$person.^methods          # Perl 6, using .^ syntax to access meta-methods</div><div class="line"></div><div class="line">person.instance_variables # Ruby</div><div class="line">$person.^attributes       # Perl 6</div></pre></td></tr></table></figure>
<p>像 Ruby 一样，在 Perl 6 中，一切都是对象，但并不是所有的操作都等同于 <code>.send</code>。许多运算符是使用类型化多重分派（具有类型的函数签名）来决定使用哪个实现的全局函数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">5.send(:+, 3)    # =&gt; 8, Ruby</div><div class="line">&amp;[+](5, 3)       # =&gt; 8, Perl 6, reference to infix addition operator</div><div class="line"></div><div class="line">&amp;[+].^candidates # Perl 6, lists all signatures for the + operator</div></pre></td></tr></table></figure>
<p>有关更多详细信息，请参阅<a href="https://docs.perl6.org/language/mop" target="_blank" rel="external">元对象协议</a>。</p>
<h2 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h2><h3 id="Perl-模块库路径"><a href="#Perl-模块库路径" class="headerlink" title="Perl 模块库路径"></a>Perl 模块库路径</h3><p>在 Ruby 中，为模块指定额外搜索路径的环境变量之一是 <code>RUBYLIB</code>。</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ RUBYLIB=<span class="string">"/some/module/lib"</span> ruby program.rb</div></pre></td></tr></table></figure>
<p>在 Perl 6 中，这是相似的，你只需要更改名称。正如你可能猜到的，你只需要使用 <code>PERL6LIB</code>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ PERL6LIB=&quot;/some/module/lib&quot; perl6 program.p6</div></pre></td></tr></table></figure>
<p>与 Ruby 一样，如果不指定 <code>PERL6LIB</code>，则需要通过 <code>use lib</code> 指令在程序中指定库路径：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># Ruby and Perl 6</div><div class="line">use lib &apos;/some/module/lib&apos;;</div></pre></td></tr></table></figure>
<h2 id="Misc"><a href="#Misc" class="headerlink" title="Misc."></a>Misc.</h2><h3 id="从模块导入特定函数"><a href="#从模块导入特定函数" class="headerlink" title="从模块导入特定函数"></a>从模块导入特定函数</h3><p>在 Ruby 中没有内置的方法来选择性地从模块中导入/导出方法。</p>
<p>在 Perl 6 中，通过在相关的 subs 上使用 “is export” 角色来指定要导出的函数，然后导出所有具有此角色的 subs。因此，下面的 <code>Bar</code> 模块导出 subs <code>foo</code> 和 <code>bar</code>，但不导出 <code>baz</code>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">unit module Bar; # remainder of the file is in module Bar &#123; ... &#125;</div><div class="line"></div><div class="line">sub foo($a) is export &#123; say &quot;foo $a&quot; &#125;</div><div class="line">sub bar($b) is export &#123; say &quot;bar $b&quot; &#125;</div><div class="line">sub baz($z) &#123; say &quot;baz $z&quot; &#125;</div></pre></td></tr></table></figure>
<p>要使用此模块，只需 <code>use Bar</code>，函数 <code>foo</code> 和 <code>bar</code> 将可用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">use Bar;</div><div class="line">foo(1);    #=&gt; &quot;foo 1&quot;</div><div class="line">bar(2);    #=&gt; &quot;bar 2&quot;</div></pre></td></tr></table></figure>
<p>如果您尝试使用 <code>baz</code>， 那么在编译时会引发 “Undeclared routine” 的错误。</p>
<p>一些模块允许选择性地导入函数，它们看起来像：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">use Bar &lt;foo&gt;; # Import only foo</div><div class="line">foo(1);        #=&gt; &quot;foo 1&quot;</div><div class="line">bar(2);        # Error!</div></pre></td></tr></table></figure>
<h2 id="OptionParser，解析命令行标志"><a href="#OptionParser，解析命令行标志" class="headerlink" title="OptionParser，解析命令行标志"></a>OptionParser，解析命令行标志</h2><p>Perl 6 中的命令行参数开关解析由 <code>MAIN</code> 子例程的参数列表完成。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"># Ruby</div><div class="line">require &apos;optparse&apos;</div><div class="line">options = &#123;&#125;</div><div class="line">OptionParser.new do |opts|</div><div class="line">    opts.banner = &apos;Usage: example.rb --length=abc&apos;</div><div class="line">    opts.on(&quot;--length&quot;, &quot;Set the file&quot;) do |length|</div><div class="line">        raise &quot;Length must be &gt; 0&quot; unless length.to_i &gt; 0</div><div class="line">        options[:length] = length</div><div class="line">    end</div><div class="line">    opts.on(&quot;--filename&quot;, &quot;Set the file&quot;) do |filename|</div><div class="line">        options[:file] = filename</div><div class="line">    end</div><div class="line">    opts.on(&quot;--verbose&quot;, &quot;Increase verbosity&quot;) do |verbose|</div><div class="line">        options[:verbose] = true</div><div class="line">    end</div><div class="line">end.parse!</div><div class="line"></div><div class="line">puts options[:length]</div><div class="line">puts options[:filename]</div><div class="line">puts &apos;Verbosity &apos;, (options[:verbose] ? &apos;on&apos; : &apos;off&apos;)</div><div class="line"></div><div class="line">ruby example.rb --filename=foo --length=42 --verbose</div><div class="line">    42</div><div class="line">    foo</div><div class="line">    Verbosity on</div><div class="line"></div><div class="line">ruby example.rb --length=abc</div><div class="line">    Length must be &gt; 0</div><div class="line"></div><div class="line"># Perl 6</div><div class="line">sub MAIN ( Int :$length where * &gt; 0, :filename = &apos;file.dat&apos;, Bool :$verbose ) &#123;</div><div class="line">    say $length;</div><div class="line">    say $data;</div><div class="line">    say &apos;Verbosity &apos;, ($verbose ?? &apos;on&apos; !! &apos;off&apos;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">perl6 example.p6 --file=foo --length=42 --verbose</div><div class="line">    42</div><div class="line">    foo</div><div class="line">    Verbosity on</div><div class="line">perl6 example.p6 --length=abc</div><div class="line">    Usage:</div><div class="line">      c.p6 [--length=&lt;Int&gt;] [--file=&lt;Any&gt;] [--verbose]</div></pre></td></tr></table></figure>
<p>注意，Perl 6 在命令行解析错误时会自动生成一个完整的使用消息。</p>
<h2 id="RubyGems，外部库"><a href="#RubyGems，外部库" class="headerlink" title="RubyGems，外部库"></a>RubyGems，外部库</h2><p>请参阅 <a href="https://modules.perl6.org/，其中提供了越来越多的" target="_blank" rel="external">https://modules.perl6.org/，其中提供了越来越多的</a> Perl 6 库以及管理它们的工具。</p>
<p>如果您使用的模块尚未转换为 Perl 6，并且本文档中未列出任何备选方案，那么它在 Perl 6 下的使用可能尚未解决。</p>
<p>你可以尝试使用 <code>Inline::Ruby</code> 从 Perl 6 程序中调用现有的 Ruby 代码。这使用 ruby 解释器的嵌入式实例来运行从 Perl 6 脚本调用的 Ruby 代码。注意，这是一个 EXPERIMENTAL 库。类似地你可以使用 <code>Inline::Perl5</code>，<code>Inline::Python</code> 和其他调用其他语言的库。</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>
    
    <div>
      
        
<div style="text-align:center;color: #ccc;font-size:15px;">
------ Young For Perl 6! ------</div>

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Perl-6/" rel="tag">#Perl 6</a>
          
            <a href="/tags/Ruby/" rel="tag">#Ruby</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/10/14/stackoverflowWeekly1014/" rel="next" title="stackoverflowWeekly1014">
                <i class="fa fa-chevron-left"></i> stackoverflowWeekly1014
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/10/17/Perl6中的函数/" rel="prev" title="Perl 6 中的函数">
                Perl 6 中的函数 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <div class="ds-share flat" data-thread-key="2016/10/17/Perl6FromRuby/"
     data-title="Perl 6 From Ruby - Nutshell"
     data-content=""
     data-url="https://ohmycloud.github.io/2016/10/17/Perl6FromRuby/">
  <div class="ds-share-inline">
    <ul  class="ds-share-icons-16">

      <li data-toggle="ds-share-icons-more"><a class="ds-more" href="javascript:void(0);">分享到：</a></li>
      <li><a class="ds-weibo" href="javascript:void(0);" data-service="weibo">微博</a></li>
      <li><a class="ds-qzone" href="javascript:void(0);" data-service="qzone">QQ空间</a></li>
      <li><a class="ds-qqt" href="javascript:void(0);" data-service="qqt">腾讯微博</a></li>
      <li><a class="ds-wechat" href="javascript:void(0);" data-service="wechat">微信</a></li>

    </ul>
    <div class="ds-share-icons-more">
    </div>
  </div>
</div>
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2016/10/17/Perl6FromRuby/"
           data-title="Perl 6 From Ruby - Nutshell" data-url="https://ohmycloud.github.io/2016/10/17/Perl6FromRuby/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="焉知非鱼" />
          <p class="site-author-name" itemprop="name">焉知非鱼</p>
          <p class="site-description motion-element" itemprop="description">Young For Perl 6</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">161</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">177</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/ohmycloud" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/740011611" target="_blank" title="weibo">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  weibo
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.jianshu.com/u/9b20c7d63b77" target="_blank" title="简书">
                  
                    <i class="fa fa-fw fa-location-arrow"></i>
                  
                  简书
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://perl6.org/" target="_blank" title="Perl 6">
                  
                    <i class="fa fa-fw fa-paper-plane"></i>
                  
                  Perl 6
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#基本语法"><span class="nav-number">1.</span> <span class="nav-text">基本语法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#语句结束分号"><span class="nav-number">1.1.</span> <span class="nav-text">语句结束分号</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#空白"><span class="nav-number">1.2.</span> <span class="nav-text">空白</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#方法调用-send"><span class="nav-number">1.3.</span> <span class="nav-text">方法调用, .send</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#变量、符号、作用域-和通用类型"><span class="nav-number">1.4.</span> <span class="nav-text">变量、符号、作用域 和通用类型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#变量作用域"><span class="nav-number">1.4.1.</span> <span class="nav-text">变量作用域</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#标量"><span class="nav-number">1.4.2.</span> <span class="nav-text">$ 标量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#数组"><span class="nav-number">1.4.3.</span> <span class="nav-text">@ 数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#散列"><span class="nav-number">1.4.4.</span> <span class="nav-text">% 散列</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#amp-Sub"><span class="nav-number">1.4.5.</span> <span class="nav-text">& Sub</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#吞噬参数-参数扩展"><span class="nav-number">1.4.6.</span> <span class="nav-text">* 吞噬参数/ 参数扩展</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Twigils"><span class="nav-number">1.4.7.</span> <span class="nav-text">Twigils</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#符号"><span class="nav-number">1.4.8.</span> <span class="nav-text">: 符号</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#操作符"><span class="nav-number">2.</span> <span class="nav-text">操作符</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#lt-gt-lt-gt-比较"><span class="nav-number">2.1.</span> <span class="nav-text">== != < > <= >= 比较</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#lt-gt-三向比较"><span class="nav-number">2.2.</span> <span class="nav-text"><=> 三向比较</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#智能匹配运算符"><span class="nav-number">2.3.</span> <span class="nav-text">~~ 智能匹配运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#amp-数字位操作"><span class="nav-number">2.4.</span> <span class="nav-text">& | ^ 数字位操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#amp-布尔运算"><span class="nav-number">2.5.</span> <span class="nav-text">& | ^ 布尔运算</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#amp-条件链式操作符"><span class="nav-number">2.6.</span> <span class="nav-text">&. 条件链式操作符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#lt-lt-gt-gt-数值左-右移位操作符，铲-shovel-操作符"><span class="nav-number">2.7.</span> <span class="nav-text"><< >> 数值左/右移位操作符，铲(shovel)操作符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gt-和-键-值分隔符"><span class="nav-number">2.8.</span> <span class="nav-text">=>和 : 键-值分隔符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#三目运算符"><span class="nav-number">2.9.</span> <span class="nav-text">?: 三目运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符串连接"><span class="nav-number">2.10.</span> <span class="nav-text">+ 字符串连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符串插值"><span class="nav-number">2.11.</span> <span class="nav-text">字符串插值</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#复合语句"><span class="nav-number">3.</span> <span class="nav-text">复合语句</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#条件"><span class="nav-number">3.1.</span> <span class="nav-text">条件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#if-elsif-else-unless§"><span class="nav-number">3.1.1.</span> <span class="nav-text">if elsif else unless§</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#cese-when"><span class="nav-number">3.1.2.</span> <span class="nav-text">cese-when</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#循环"><span class="nav-number">3.2.</span> <span class="nav-text">循环</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#while-until"><span class="nav-number">3.2.1.</span> <span class="nav-text">while until</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#for-each"><span class="nav-number">3.2.2.</span> <span class="nav-text">for .each</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#流程中断语句"><span class="nav-number">3.3.</span> <span class="nav-text">流程中断语句</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#正则表达式（Regex-Regexp）"><span class="nav-number">4.</span> <span class="nav-text">正则表达式（Regex / Regexp）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#match-方法和-运算符"><span class="nav-number">4.1.</span> <span class="nav-text">.match 方法和 =~ 运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sub-和-sub"><span class="nav-number">4.2.</span> <span class="nav-text">.sub 和 .sub!</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#正则表达式选项"><span class="nav-number">4.3.</span> <span class="nav-text">正则表达式选项</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#空格被忽略，大多数东西必须被引起来"><span class="nav-number">4.4.</span> <span class="nav-text">空格被忽略，大多数东西必须被引起来</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#特殊匹配器通常属于-lt-gt-语法"><span class="nav-number">4.5.</span> <span class="nav-text">特殊匹配器通常属于 <> 语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#最长令牌匹配（LTM）替代交替"><span class="nav-number">4.6.</span> <span class="nav-text">最长令牌匹配（LTM）替代交替</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文件相关操作"><span class="nav-number">5.</span> <span class="nav-text">文件相关操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#将文本文件的行读入数组"><span class="nav-number">5.1.</span> <span class="nav-text">将文本文件的行读入数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#迭代文本文件的行"><span class="nav-number">5.2.</span> <span class="nav-text">迭代文本文件的行</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#面向对象"><span class="nav-number">6.</span> <span class="nav-text">面向对象</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#基本类，方法，属性"><span class="nav-number">6.1.</span> <span class="nav-text">基本类，方法，属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#私有方法"><span class="nav-number">6.2.</span> <span class="nav-text">私有方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#元"><span class="nav-number">6.3.</span> <span class="nav-text">元</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#环境变量"><span class="nav-number">7.</span> <span class="nav-text">环境变量</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Perl-模块库路径"><span class="nav-number">7.1.</span> <span class="nav-text">Perl 模块库路径</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Misc"><span class="nav-number">8.</span> <span class="nav-text">Misc.</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#从模块导入特定函数"><span class="nav-number">8.1.</span> <span class="nav-text">从模块导入特定函数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#OptionParser，解析命令行标志"><span class="nav-number">9.</span> <span class="nav-text">OptionParser，解析命令行标志</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RubyGems，外部库"><span class="nav-number">10.</span> <span class="nav-text">RubyGems，外部库</span></a></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2015 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">焉知非鱼</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  托管在 -
  <a class="theme-link" href="https://github.com/ohmycloud/ohmycloud.github.io">
    Github
  </a>
  &nbsp; | &nbsp;
</div>

<div class="theme-info">
 <a class="51-img" href="/images/footer.gif" target="_blank"><img alt="统计" src="/images/footer.gif"  align="right" /></a>
<div>
        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"chenyf"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    <script src="/vendors/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  






  
  
  

  

  

</body>
</html>
