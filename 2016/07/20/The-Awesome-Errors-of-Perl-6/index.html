<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|monospace:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Errors," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="The Awesome Errors of Perl 6如果你一直在读技术相关的东西，你现在可能知道 Rust 里面的令人惊喜的错误报告能力。 既然 Perl 6 也因它的绝妙的错误处理而闻名, mst 查询了一些例子来炫耀 rust 的错误处理能力, 但是不幸的是我没有发现。
我尽力避免错误并且我很少完整地读完它。所以我会搜寻一些很酷的关于令人惊叹的错误方面的例子并写出来。虽然我能够用头撞击键盘">
<meta property="og:type" content="article">
<meta property="og:title" content="The Awesome Errors of Perl 6">
<meta property="og:url" content="https://ohmycloud.github.io/2016/07/20/The-Awesome-Errors-of-Perl-6/index.html">
<meta property="og:site_name" content="Perl 6 青春小站">
<meta property="og:description" content="The Awesome Errors of Perl 6如果你一直在读技术相关的东西，你现在可能知道 Rust 里面的令人惊喜的错误报告能力。 既然 Perl 6 也因它的绝妙的错误处理而闻名, mst 查询了一些例子来炫耀 rust 的错误处理能力, 但是不幸的是我没有发现。
我尽力避免错误并且我很少完整地读完它。所以我会搜寻一些很酷的关于令人惊叹的错误方面的例子并写出来。虽然我能够用头撞击键盘">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/326727-dc7e73c2e865eb03.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/326727-3581c5469cbca92e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:updated_time" content="2016-10-23T16:44:10.011Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="The Awesome Errors of Perl 6">
<meta name="twitter:description" content="The Awesome Errors of Perl 6如果你一直在读技术相关的东西，你现在可能知道 Rust 里面的令人惊喜的错误报告能力。 既然 Perl 6 也因它的绝妙的错误处理而闻名, mst 查询了一些例子来炫耀 rust 的错误处理能力, 但是不幸的是我没有发现。
我尽力避免错误并且我很少完整地读完它。所以我会搜寻一些很酷的关于令人惊叹的错误方面的例子并写出来。虽然我能够用头撞击键盘">
<meta name="twitter:image" content="http://upload-images.jianshu.io/upload_images/326727-dc7e73c2e865eb03.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"hide"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="https://ohmycloud.github.io/2016/07/20/The-Awesome-Errors-of-Perl-6/"/>

  <title> The Awesome Errors of Perl 6 | Perl 6 青春小站 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Perl 6 青春小站</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>
 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                The Awesome Errors of Perl 6
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-20T00:00:00+08:00" content="2016-07-20">
              2016-07-20
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Perl-6/" itemprop="url" rel="index">
                    <span itemprop="name">Perl 6</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/20/The-Awesome-Errors-of-Perl-6/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/20/The-Awesome-Errors-of-Perl-6/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="The-Awesome-Errors-of-Perl-6"><a href="#The-Awesome-Errors-of-Perl-6" class="headerlink" title="The Awesome Errors of Perl 6"></a><a href="http://perl6.party/post/The-Awesome-Errors-of-Perl-6" target="_blank" rel="external">The Awesome Errors of Perl 6</a></h2><p>如果你一直在读技术相关的东西，你现在可能知道 Rust 里面的<a href="https://internals.rust-lang.org/t/new-error-format/3438" target="_blank" rel="external">令人惊喜的错误报告能力</a>。 既然 Perl 6 也因它的绝妙的错误处理而闻名, mst 查询了一些例子来炫耀 rust 的错误处理能力, 但是不幸的是我没有发现。</p>
<p>我尽力避免错误并且我很少完整地读完它。所以我会搜寻一些很酷的关于令人惊叹的错误方面的例子并写出来。虽然我能够用头撞击键盘并把输出粘贴出来, 但是那将会惨不忍读, 所以我会谈论一些对初学者来说没那么明显的棘手的错误, 还有怎样修复那些错误。</p>
<p>让我们开始用头部猛击吧!</p>
<a id="more"></a>
<h2 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h2><p>下面是一段有错误的代码;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">say &quot;Hello world!;</div><div class="line">say &quot;Local time is &#123;DateTime.now&#125;&quot;;</div><div class="line"></div><div class="line"># ===SORRY!=== Error while compiling /home/zoffix/test.p6</div><div class="line"># Two terms in a row (runaway multi-line &quot;&quot; quote starting at line 1 maybe?)</div><div class="line"># at /home/zoffix/test.p6:2</div><div class="line"># ------&gt; say &quot;Local time is &#123;DateTime.now&#125;&quot;;</div><div class="line">#     expecting any of:</div><div class="line">#         infix</div><div class="line">#         infix stopper</div><div class="line">#         postfix</div><div class="line">#         statement end</div><div class="line">#         statement modifier</div><div class="line">#         statement modifier loop</div></pre></td></tr></table></figure>
<p>第一行丢失了字符串上的闭合引号, 所以直到第二行的开括号之间的所有东西都会被认为是字符串的一部分。一旦推测的闭合引号被找到, Perl 6 就看到单词 “Local”, 这个单词被定义为一个项(item)。因为在 Perl 6 中一行中同时存在两个项(item)是不允许的, 所以编译器抛出了错误, 并对它所期望的提供了一些建议, 并且它探测到了我们正处在一个字符串中, 并且建议我们检测, 我们忘记在行 1 中闭合引号了。</p>
<p>===SORRY!=== 部分并不是意味着你运行的是加拿大版本的编译器, 而是意味着该错误是一个编译时错误(和运行时相比)。</p>
<h2 id="Nom-nom-nom-nom"><a href="#Nom-nom-nom-nom" class="headerlink" title="Nom-nom-nom-nom"></a>Nom-nom-nom-nom</h2><p>下面有一个有趣的错误。我们有一个返回东西的子例程, 所以我们调用了它并使用了 for 循环来迭代值:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">sub things &#123;1 ... ∞&#125;</div><div class="line"></div><div class="line">for things &#123;</div><div class="line">    say &quot;Current stuff is $_&quot;;</div><div class="line">&#125;</div><div class="line"></div><div class="line"># ===SORRY!===</div><div class="line"># Function &apos;things&apos; needs parens to avoid gobbling block</div><div class="line"># at /home/zoffix/test.p6:5</div><div class="line"># ------&gt; &#125;&lt;EOL&gt;</div><div class="line"># Missing block (apparently claimed by &apos;things&apos;)</div><div class="line"># at /home/zoffix/test.p6:5</div><div class="line"># ------&gt; &#125;&lt;EOL&gt;</div></pre></td></tr></table></figure>
<p>Perl 6 允许你在调用子例程的时候省略圆括号。上面的错误提到了全局块儿(globbing blocks)。实际发生的是我们希望传给 for 循环的块儿被作为参数传递给了子例程。输出中的第二个错误证实 for 循环丢失了它的块儿(并且给出了一个建议, 它被我们的 things 子例程接收了)。</p>
<p>第一个错误告诉我们怎样修复那个问题: Function ‘things’ needs parens, 所以我们的循环需要是:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">for things() &#123;</div><div class="line">    say &quot;Current stuff is $_&quot;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>然而, 如果我们的子例程真的期望传递一个块儿, 那么圆括号就不是必须的。两个代码块肩并肩地在一块儿会导致  “two terms in a row” 错误, 所以 Perl 6 知道把第一个 block 传递给子例程并使用第二个 block 作为 for 循环的主体:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">sub things (&amp;code) &#123; code &#125;</div><div class="line"></div><div class="line">for things &#123; 1 ... ∞ &#125; &#123;</div><div class="line">    say &quot;Current stuff is $_&quot;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Did-You-Mean-Levestein"><a href="#Did-You-Mean-Levestein" class="headerlink" title="Did You Mean Levestein?"></a>Did You Mean Levestein?</h2><p>下面有一个很酷的特性, 它不仅告诉你出错了, 还能指出你可能想要的:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">sub levenshtein &#123;&#125;</div><div class="line">levestein;</div><div class="line"></div><div class="line"># ===SORRY!=== Error while compiling /home/zoffix/test.p6</div><div class="line"># Undeclared routine:</div><div class="line">#     levestein used at line 2. Did you mean &apos;levenshtein&apos;?</div></pre></td></tr></table></figure>
<p>当 Perl 6 遇到它不认识的名字时它会为它知道的东西计算<a href="https://en.wikipedia.org/wiki/Levenshtein_distance" target="_blank" rel="external">Levenshtein distance</a>以尝试提供一个有用的建议。在上面的距离中它遇到了一个它不知道的子例程调用。它注意到我们确实有一个相似的子例程, 所以它把它作为备选提供了出来。不要再盯着屏幕了, 尝试找到你在哪里敲击的键盘！</p>
<p>然而, 这个特性不可能在触发时面面俱到。假设我们把子例程的名字变为大写的 Levenshtein, 我们就不会得到那个建议, 因为对于以大写字母开头的东西, 编译器认为它看起来像一个类型名而非子例程名, 所以它检测这些东西来代替:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">class Levenshtein &#123;&#125;</div><div class="line">Lvnshtein.new;</div><div class="line"></div><div class="line"># ===SORRY!=== Error while compiling /home/zoffix/test.p6</div><div class="line"># Undeclared name:</div><div class="line">#    Lvnshtein used at line 2. Did you mean &apos;Levenshtein&apos;?</div></pre></td></tr></table></figure>
<h2 id="一旦你成了-Seq-你再也变不回来"><a href="#一旦你成了-Seq-你再也变不回来" class="headerlink" title="一旦你成了 Seq, 你再也变不回来"></a>一旦你成了 Seq, 你再也变不回来</h2><p>我们假设你生成了一个短的斐波纳契数字序列。你打印了它然后你想再打印它一次, 但是这一次打印每个成员的平方。发生了什么?</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">my $seq = (1, 1, * + * ... * &gt; 100);</div><div class="line">$seq.join(&apos;, &apos;).say;</div><div class="line">$seq.map(&#123; $_² &#125;).join(&apos;, &apos;).say;</div><div class="line"></div><div class="line"># 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144</div><div class="line"># This Seq has already been iterated, and its values consumed</div><div class="line"># (you might solve this by adding .cache on usages of the Seq, or</div><div class="line"># by assigning the Seq into an array)</div><div class="line">#   in block &lt;unit&gt; at test.p6 line 3</div></pre></td></tr></table></figure>
<p>嗷, 运行时错误。我们从<a href="https://docs.perl6.org/language/operators#index-entry-..._operators" target="_blank" rel="external">序列操作符</a>得到的 Seq 类型不能保留东西。当你迭代序列的时候, 每次它给你一个值之后就丢弃这个值, 所以一旦你迭代完整个 Seq 序列, 就结束了。</p>
<p>上面的例子中, 我们尝试再次迭代那个序列, 所以 Rakudo 运行时奔溃并抱怨了, 因为它做不了。错误消息的确提供了两种可能的解决方案。我们要么使用 .cache 方法来获得一个我们将要迭代的 List:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">my $seq = (1, 1, * + * ... * &gt; 100).cache;</div><div class="line">$seq             .join(&apos;, &apos;).say;</div><div class="line">$seq.map(&#123; $_² &#125;).join(&apos;, &apos;).say;</div><div class="line"></div><div class="line"># 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144</div><div class="line"># 1, 1, 4, 9, 25, 64, 169, 441, 1156, 3025, 7921, 20736</div></pre></td></tr></table></figure>
<p>或者我们可以从一开始就使用数组 Array:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">my @seq = 1, 1, * + * … * &gt; 100;</div><div class="line">@seq             .join(&apos;, &apos;).say;</div><div class="line">@seq.map(&#123; $_² &#125;).join(&apos;, &apos;).say;</div><div class="line"></div><div class="line"># 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144</div><div class="line"># 1, 1, 4, 9, 25, 64, 169, 441, 1156, 3025, 7921, 20736</div></pre></td></tr></table></figure>
<p>并且即使我们把序列 Seq 存储进了 Array 中, 它不会被具体化直到真正被需要时:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">my @a = 1 … ∞;</div><div class="line">say @a[^10];</div><div class="line"></div><div class="line"># OUTPUT:</div><div class="line"># (1 2 3 4 5 6 7 8 9 10)</div></pre></td></tr></table></figure>
<h2 id="These-Aren’t-The-Attributes-You’re-Looking-For"><a href="#These-Aren’t-The-Attributes-You’re-Looking-For" class="headerlink" title="These Aren’t The Attributes You’re Looking For"></a>These Aren’t The Attributes You’re Looking For</h2><p>假设你有一个类。在类里面, 你有一些私有属性并且你有一个使用属性的值作为它的一部分的正则匹配方法:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">class &#123;</div><div class="line">    has $!prefix = &apos;foo&apos;;</div><div class="line">	method has-prefix ($text) &#123;</div><div class="line">	    so $text ~~ /^ $!prefix/;</div><div class="line">	&#125;</div><div class="line">&#125;.new.has-prefix(&apos;foobar&apos;).say;</div><div class="line"></div><div class="line"># ===SORRY!=== Error while compiling /home/zoffix/test.p6</div><div class="line"># Attribute $!prefix not available inside of a regex, since regexes are methods on Cursor.</div><div class="line"># Consider storing the attribute in a lexical, and using that in the regex.</div><div class="line"># at /home/zoffix/test.p6:4</div><div class="line"># ------&gt;         so $text ~~ /^ $!prefix⏏/;</div><div class="line">#     expecting any of:</div><div class="line">#         infix stopper</div></pre></td></tr></table></figure>
<p>糟糕! 发生什么了?</p>
<p>就像编译器所指出的那样, Perl 6 实际上是由几种语言编织而成: Perl 6, Quote, 和 Regex 语言是这个编织物的一部分。这就是为什么像下面这样的东西就能起效:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">say &quot;foo &#123; &quot;bar&quot; ~ &quot;meow&quot; &#125; ber &quot;;</div><div class="line"></div><div class="line"># OUTPUT:</div><div class="line"># foo barmeow ber</div></pre></td></tr></table></figure>
<p>尽管内插的代码块中使用了同样的引号”, 但是没有发生冲突。然而, 同样的机制在正则表达式中有限制, 因为在正则表达式中, 所查询的属性属于 Cursor 对象, 它负责这个正则表达式。</p>
<p>为了避免这个错误, 就像错误信息暗示的那样, 仅仅使用一个临时的变量来存储 $!prefix 好了, 或者使用 given 块儿:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">class &#123;</div><div class="line">    has $!prefix = &apos;foo&apos;;</div><div class="line">	method has-prefix ($text) &#123;</div><div class="line">	    given $!prefix &#123; so $text ~~ /^ $_/ &#125;</div><div class="line">	&#125;</div><div class="line">&#125;.new.has-prefix(&apos;foobar&apos;).say;</div></pre></td></tr></table></figure>
<h2 id="De-Ranged"><a href="#De-Ranged" class="headerlink" title="De-Ranged"></a>De-Ranged</h2><p>尝试过访问列表中超出范围的元素吗?</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">my @a = &lt;foo bar ber&gt;;</div><div class="line">say @a[*-42];</div><div class="line"></div><div class="line"># Effective index out of range. Is: -39, should be in 0..Inf</div><div class="line">#  in block &lt;unit&gt; at test.p6 line 2</div></pre></td></tr></table></figure>
<p>在 Perl 6 中, 如果从列表末端索引一个条目, 要使用时髦的语法: <code>[*-42]</code>。它实际上是一个接收一个参数(它是列表中元素的个数)的闭包, 然后减去 42, 然后返回的值作为实际的索引。如果你特别无聊, 你可以使用 <code>@a[sub ($total) { $total - 42 }]</code> 代替。</p>
<p>在上面的错误中, 那个索引以 <code>3 - 42</code> 结束, 或者说是 <code>-39</code>, 这是我们在错误信息中看到的那个值。因为索引不能是负的, 所以我们收到了错误, 这也告诉我们索引必须从 0 到 正无穷大(任何超过列表所包含的索引会在被查询时返回 Any)。</p>
<h2 id="A-Rose-By-Any-Other-Name-Would-Code-As-Sweet"><a href="#A-Rose-By-Any-Other-Name-Would-Code-As-Sweet" class="headerlink" title="A Rose By Any Other Name, Would Code As Sweet"></a>A Rose By Any Other Name, Would Code As Sweet</h2><p>如果你是 Perl 6 的姐妹语言, Perl  5 的活跃使用者, 你可能会发现有时候你在 Perl 6 代码中写出 Perl 5 风格的代码:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">say &quot;foo&quot; . &quot;bar&quot;;</div><div class="line"></div><div class="line"># ===SORRY!=== Error while compiling /home/zoffix/test.p6</div><div class="line"># Unsupported use of . to concatenate strings; in Perl 6 please use ~</div><div class="line"># at /home/zoffix/test.p6:1</div><div class="line"># ------&gt; say &quot;foo&quot; .⏏ &quot;bar&quot;;</div></pre></td></tr></table></figure>
<p>在上面, 我们尝试使用 Perl 5 的字符串连接操作符来连接两个字符串。这个错误机制足够聪明地检测到这样的用法并推荐了正确的 <code>~</code> 操作符来代替。</p>
<p>这不是这种探测的唯一使用场景。有很多场景。这儿有另外一个例子, 用于探测 Perl 5 的钻石操作符的意外使用, 伴随着几个程序员可能想要的建议:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">while &lt;&gt; &#123;&#125;</div><div class="line"></div><div class="line"># ===SORRY!=== Error while compiling /home/zoffix/test.p6</div><div class="line"># Unsupported use of &lt;&gt;; in Perl 6 please use lines() to read input, (&apos;&apos;) to</div><div class="line"># represent a null string or () to represent an empty list</div><div class="line"># at /home/zoffix/test.p6:1</div><div class="line"># ------&gt; while &lt;⏏&gt; &#123;&#125;</div></pre></td></tr></table></figure>
<h2 id="Heredoc-Theredoc-Everywheredoc"><a href="#Heredoc-Theredoc-Everywheredoc" class="headerlink" title="Heredoc, Theredoc, Everywheredoc"></a>Heredoc, Theredoc, Everywheredoc</h2><p>为了抛出问题, 请先阅读底部的错误, 假装就是你自己写的程序代码:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">my $stuff = qq:to/END/;</div><div class="line">Blah blah blah</div><div class="line">END;</div><div class="line"></div><div class="line">for ^10 &#123;</div><div class="line">    say &apos;things&apos;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">for ^20 &#123;</div><div class="line">    say &apos;moar things&apos;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">sub foo ($wtf) &#123;</div><div class="line">    say &apos;oh my!&apos;;</div><div class="line">&#125;</div><div class="line"></div><div class="line"># ===SORRY!=== Error while compiling /home/zoffix/test.p6</div><div class="line"># Variable &apos;$wtf&apos; is not declared</div><div class="line"># at /home/zoffix/test.p6:13</div><div class="line"># ------&gt; sub foo (⏏$wtf) &#123;</div></pre></td></tr></table></figure>
<p>哈? 编译器哭着说有一个未声明的变量, 但是它指向的却是子例程中的签名。当然它不会被声明。</p>
<p>那些没有发现问题的人: 问题就出在 heredoc 中的闭合 END 后面的分号上。 heredoc 在闭合分隔符单独出现在一行的地方结束。在编译器看来, 我们还没有在 <code>END;</code> 这儿看到分隔符, 所以它继续解析就像它仍旧在解析 heredoc 一样。<code>qq</code> heredoc 能让你插入变量, 所以当解析器解析到签名中的 <code>$wtf</code> 变量时, 解析器并不知道它是一段实际代码中的签名还是某些随机的文本, 所以编译器哭着说变量未找到。</p>
<h2 id="Won’t-Someone-Think-of-The-Reader"><a href="#Won’t-Someone-Think-of-The-Reader" class="headerlink" title="Won’t Someone Think of The Reader?"></a>Won’t Someone Think of The Reader?</h2><p>下面有一个极好的错误能阻止你写出恐怖的代码:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">my $a;</div><div class="line">sub &#123;</div><div class="line">    $a.say;</div><div class="line">	$^a.say;</div><div class="line">&#125;</div><div class="line"></div><div class="line"># ===SORRY!=== Error while compiling /home/zoffix/test.p6</div><div class="line"># $a has already been used as a non-placeholder in the surrounding sub block,</div><div class="line">#   so you will confuse the reader if you suddenly declare $^a here</div><div class="line"># at /home/zoffix/test.p6:4</div><div class="line"># ------&gt;         $^a.say;</div></pre></td></tr></table></figure>
<p>这里有一点背景: 你可以在变量身上使用 <code>$^ twigil</code> 来创建一个隐式的签名。为了能在嵌套的块中使用这样的变量, 这个语法实际上创建了不带 twigil 的相同变量, 所以 <code>$^a</code> 和 <code>$a</code> 是同一个东西, 并且上面的子例程的签名是 <code>($a)</code>。</p>
<p>在我们的代码中, 我们还在外部作用域中有个 <code>$a</code> 并且推测我们首先打印出它, 在使用 <code>$^</code> twigil 在同样一个作用域中创建另外一个 <code>$a</code> 之前, 但是这个子例程包含了参数… 真绕脑! 为了避免这样, 就把你的变量重命名为某个不会冲突的东西好了。改成泰文怎么样?</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">my $ความสงบ = &apos;peace&apos;;</div><div class="line">sub &#123;</div><div class="line">    $ความสงบ.say;</div><div class="line">    $^กับตัวแปรของคุณ.say;</div><div class="line">&#125;(&apos;to your variables&apos;);</div><div class="line"></div><div class="line"># OUTPUT:</div><div class="line"># peace</div><div class="line"># to your variables</div></pre></td></tr></table></figure>
<h2 id="Well-Colour-Me-Errpressed"><a href="#Well-Colour-Me-Errpressed" class="headerlink" title="Well, Colour Me Errpressed!"></a>Well, Colour Me Errpressed!</h2><p>如果你的终端支持它, 那么编译器就会发出 ANSI 代码来给输出着点色:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">for ^5 &#123;</div><div class="line">    say meow&quot;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/326727-dc7e73c2e865eb03.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="img"></p>
<p>那很好也很显眼夺目, 但是假设你想把从编译器中捕获的输出显示到任何地方, 你会原样地得到 ANSI 代码, 就像 <code>31m===[0mSORRY![31m===[0m</code>。</p>
<p>这很可怕, 但是幸运的是, 禁用颜色很简单: 仅仅把 <code>RAKUDO_ERROR_COLOR</code> 这个环境变量的值设置为 0 就好了：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/326727-3581c5469cbca92e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="img"></p>
<p>你也可以在程序中设置它。你不得不足够早地设置它, 所以在任何地方把它放置在程序的开头并使用 <a href="https://docs.perl6.org/language/phasers#BEGIN" target="_blank" rel="external">BEGIN phaser</a> 来设置它只要赋值被编译完成:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">BEGIN %*ENV&lt;RAKUDO_ERROR_COLOR&gt; = 0;</div><div class="line"></div><div class="line">for ^5 &#123;</div><div class="line">    say meow&quot;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="An-Exceptional-Failure"><a href="#An-Exceptional-Failure" class="headerlink" title="An Exceptional Failure"></a>An Exceptional Failure</h2><p>Perl 6 有一个特殊的异常 – <a href="https://docs.perl6.org/type/Failure" target="_blank" rel="external">Failure</a> – 直到你把它用作变量它才会被激发, 并且你甚至可以通过在布尔上下文中使用它来彻底地消除它。你可以通过调用 <a href="https://docs.perl6.org/routine/fail" target="_blank" rel="external">fail</a> 子例程产生你自己的 Failures 并且 Perl 6 在核心中在尽可能合适的时候使用它。</p>
<p>这儿有一段代码, 其中我们定义了一个前缀操作符用来计算对象的圆周长, 给定一个半径。如果半径是负值, 它就调用 fail, 并返回一个 Failure 对象:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">sub prefix:&lt;⟳&gt; (\𝐫) &#123;</div><div class="line">    𝐫 &lt; 0 and fail &apos;Your object warps the Universe a new one&apos;;</div><div class="line">    τ × 𝐫;</div><div class="line">&#125;</div><div class="line"></div><div class="line">say &apos;Calculating the circumference of the mystery object&apos;;</div><div class="line">my $cₘ = ⟳ −𝑒;</div><div class="line"></div><div class="line">say &apos;Calculating the circumference of the Earth&apos;;</div><div class="line">my $cₑ = ⟳ 6.3781 × 10⁶;</div><div class="line"></div><div class="line">say &apos;Calculating the circumference of the Sun&apos;;</div><div class="line">my $cₛ = ⟳ 6.957 × 10⁸;</div><div class="line"></div><div class="line">say &quot;The circumference of the largest object is &#123;max $cₘ, $cₑ, $cₛ&#125; metres&quot;;</div><div class="line"></div><div class="line"># OUTPUT:</div><div class="line"># Calculating the circumference of the mystery object</div><div class="line"># Calculating the circumference of the Earth</div><div class="line"># Calculating the circumference of the Sun</div><div class="line"># Your object warps the Universe a new one</div><div class="line">#   in sub prefix:&lt;⟳&gt; at test.p6 line 2</div><div class="line">#   in block &lt;unit&gt; at test.p6 line 7</div><div class="line">#</div><div class="line"># Actually thrown at:</div><div class="line">#   in block &lt;unit&gt; at test.p6 line 15</div></pre></td></tr></table></figure>
<p>在第七行中我们正计算一个半径为负值的圆的周长, 所以如果它仅仅是一个常规的异常, 那么我们的代码会当场挂掉。相反, 通过输出, 我们能够看到我们继续计算了 Earth 和 Sun 的周长, 直到我们到达最后一行。</p>
<p>在那儿我们尝试在 <code>$cₘ</code> 变量中使用 Failure 作为 max 程序的一个参数。因为我们在查询真实的值, Failure 被激发并给了我们一个很好的反向追踪。上面的错误信息包含了我们的 Failure 爆发(第十五行)点, 还有我们的接收点(第七行)还有错误来自哪儿(第二行)。真甜!</p>
<h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p>Perl 6 拥有令人惊叹的 Errors!</p>
<p>大西瓜啊。</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>
    
    <div>
      
        
<div style="text-align:center;color: #ccc;font-size:15px;">
------ Young For Perl 6! ------</div>

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Errors/" rel="tag">#Errors</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/07/18/roundrobin/" rel="next" title="roundrobin">
                <i class="fa fa-chevron-left"></i> roundrobin
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/07/22/HOW方法/" rel="prev" title="HOW 方法">
                HOW 方法 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <div class="ds-share flat" data-thread-key="2016/07/20/The-Awesome-Errors-of-Perl-6/"
     data-title="The Awesome Errors of Perl 6"
     data-content=""
     data-url="https://ohmycloud.github.io/2016/07/20/The-Awesome-Errors-of-Perl-6/">
  <div class="ds-share-inline">
    <ul  class="ds-share-icons-16">

      <li data-toggle="ds-share-icons-more"><a class="ds-more" href="javascript:void(0);">分享到：</a></li>
      <li><a class="ds-weibo" href="javascript:void(0);" data-service="weibo">微博</a></li>
      <li><a class="ds-qzone" href="javascript:void(0);" data-service="qzone">QQ空间</a></li>
      <li><a class="ds-qqt" href="javascript:void(0);" data-service="qqt">腾讯微博</a></li>
      <li><a class="ds-wechat" href="javascript:void(0);" data-service="wechat">微信</a></li>

    </ul>
    <div class="ds-share-icons-more">
    </div>
  </div>
</div>
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2016/07/20/The-Awesome-Errors-of-Perl-6/"
           data-title="The Awesome Errors of Perl 6" data-url="https://ohmycloud.github.io/2016/07/20/The-Awesome-Errors-of-Perl-6/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="焉知非鱼" />
          <p class="site-author-name" itemprop="name">焉知非鱼</p>
          <p class="site-description motion-element" itemprop="description">Young For Perl 6</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">162</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">178</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/ohmycloud" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/740011611" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.jianshu.com/u/9b20c7d63b77" target="_blank" title="简书">
                  
                    <i class="fa fa-fw fa-location-arrow"></i>
                  
                  简书
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://perl6.org/" target="_blank" title="Perl 6">
                  
                    <i class="fa fa-fw fa-fire"></i>
                  
                  Perl 6
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://pl6anet.org/" target="_blank" title="pl6anet">
                  
                    <i class="fa fa-fw fa-umbrella"></i>
                  
                  pl6anet
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://docs.perl6.org/" target="_blank" title="perl6doc">
                  
                    <i class="fa fa-fw fa-angle-double-right"></i>
                  
                  perl6doc
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#The-Awesome-Errors-of-Perl-6"><span class="nav-number">1.</span> <span class="nav-text">The Awesome Errors of Perl 6</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#基础"><span class="nav-number">2.</span> <span class="nav-text">基础</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Nom-nom-nom-nom"><span class="nav-number">3.</span> <span class="nav-text">Nom-nom-nom-nom</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Did-You-Mean-Levestein"><span class="nav-number">4.</span> <span class="nav-text">Did You Mean Levestein?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#一旦你成了-Seq-你再也变不回来"><span class="nav-number">5.</span> <span class="nav-text">一旦你成了 Seq, 你再也变不回来</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#These-Aren’t-The-Attributes-You’re-Looking-For"><span class="nav-number">6.</span> <span class="nav-text">These Aren’t The Attributes You’re Looking For</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#De-Ranged"><span class="nav-number">7.</span> <span class="nav-text">De-Ranged</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#A-Rose-By-Any-Other-Name-Would-Code-As-Sweet"><span class="nav-number">8.</span> <span class="nav-text">A Rose By Any Other Name, Would Code As Sweet</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Heredoc-Theredoc-Everywheredoc"><span class="nav-number">9.</span> <span class="nav-text">Heredoc, Theredoc, Everywheredoc</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Won’t-Someone-Think-of-The-Reader"><span class="nav-number">10.</span> <span class="nav-text">Won’t Someone Think of The Reader?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Well-Colour-Me-Errpressed"><span class="nav-number">11.</span> <span class="nav-text">Well, Colour Me Errpressed!</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#An-Exceptional-Failure"><span class="nav-number">12.</span> <span class="nav-text">An Exceptional Failure</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#结论"><span class="nav-number">13.</span> <span class="nav-text">结论</span></a></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2015 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">焉知非鱼</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  托管在 -
  <a class="theme-link" href="https://github.com/ohmycloud/ohmycloud.github.io">
    Github
  </a>
  &nbsp; | &nbsp;
</div>

<div class="theme-info">
 <a class="51-img" href="/images/footer.gif" target="_blank"><img alt="统计" src="/images/footer.gif"  align="right" /></a>
<div>
        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"chenyf"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    <script src="/vendors/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  






  
  
  

  

  

</body>
</html>
